<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Conversio V1 API</title>

    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://app.conversio.com'>Sign Up for an API Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id='authentication'>Authentication</h1><pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
<span class="gp">$ </span>curl <span class="s2">"api_endpoint_here"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<p>Conversio provides three types of Authentication, each with its own use case. These are:</p>

<ol>
<li><strong>API Key</strong>: For store owners or someone affiliated with a store owner (typically a developer). This is the fastest way to get access to a store&rsquo;s data and actions;</li>
<li><strong>OAuth</strong>: For Partner Apps that wish to authenticate with their users&#39; accounts in Conversio. This gives access to Conversio on behalf of one or more users.</li>
<li><strong>HMAC</strong>: For Partner Apps only. Used for accessing the Partner App API.</li>
</ol>
<h2 id='api-key-authentication'>API Key Authentication</h2>
<p>All paths should prefixed with https://app.conversio.com/api/v1 and will need the following HTTP header:</p>

<p><code class="prettyprint">X-ApiKey: YOUR_API_KEY</code></p>

<p><aside class="notice">
Your API Key can be found in the store&rsquo;s <a href="https://app.conversio.com/profile">profile page</a>.
</aside></p>
<h2 id='oauth'>OAuth</h2>
<p>Conversio implements the Authorization Code Grant of the <a href="https://tools.ietf.org/html/rfc6749">OAuth v2.0</a> standard, with <a href="https://tools.ietf.org/html/draft-ietf-oauth-signed-http-request-03">PoP Tokens</a> (Proof of Possession).</p>

<p>The standard is followed to spec, except for these cases:</p>

<ul>
<li>Access Tokens do not expire.</li>
<li><code class="prettyprint">responseType</code> is not a required query parameter.</li>
<li><code class="prettyprint">accessType</code> is not a required query parameter.</li>
<li><code class="prettyprint">state</code> is required and must have a minimum length.</li>
</ul>

<p>In general terms, the OAuth process involves a Partner App getting authorization from the User to access their account. When authorized, an Access Token must be requested from Conversio. This token can then be included in requests to Conversio to Authenticate &amp; Authorize the App to access a User&rsquo;s account.</p>

<p>This section has the following structure:</p>

<ul>
<li><a href="#terminology">Terminology</a></li>
<li><a href="#issuing-access-token">Issuing Access Token</a>:

<ol>
<li><a href="#step-1-get-user-authorization">Get User Authorization</a></li>
<li><a href="#step-2-receive-authorization-code">Receive Authorization Code</a></li>
<li><a href="#step-3-exchange-code-for-access-token">Exchange Code for Access Token</a></li>
</ol></li>
<li><a href="#authorizing-requests">Authorizing Requests</a></li>
<li><a href="#scopes">Scopes</a></li>
</ul>
<h3 id='terminology'>Terminology</h3>
<ul>
<li>User: Someone who owns an account in Conversio, and on whose behalf the API is used;</li>
<li>Partner App: An app, authorized by Conversio, that can access a User&rsquo;s API when authorized by that User;</li>
<li>Access Token: A 30 character string that, when included in an API request, Authenticates its associated User and Authorizes access according to it associated scopes.</li>
<li>Scope: A string that represents permission to access a resource. Listed <a href="#scopes">here</a>.</li>
<li>PoP Token: Proof of Possession Token. The only type of Access Token issued by Conversio.</li>
<li>Code: A short-lived 60 character string that can be exchanged for an Access Token.</li>
<li>Client Secret: A 60 character string that acts as password when Authenticating a Partner App and as symmetric key when signing a PoP Token.</li>
<li>JWS: <a href="https://tools.ietf.org/html/rfc7515">JSON Web Signature</a></li>
</ul>
<h3 id='issuing-access-token'>Issuing Access Token</h3>
<p>Conversio uses the Authorization Code Grant flow from OAuth 2.0 to issue Access Tokens. This involves three requests:</p>

<ol>
<li>Redirecting the User to Conversio, where they can authorize the Partner App</li>
<li>Conversio redirects the User back to the Partner App, including a <code class="prettyprint">code</code></li>
<li>The Partner App exchanges the <code class="prettyprint">code</code> for an <code class="prettyprint">access_token</code></li>
</ol>

<p>These three steps are described in detail below.</p>
<h4 id='step-1-get-user-authorization'>Step 1: Get User Authorization</h4><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/oauth/authorize"</span> <span class="se">\</span>
  -G <span class="se">\</span>
  -X GET <span class="se">\</span>
  -d <span class="nv">client_id</span><span class="o">=</span>57b5aa3b046abfb053d80b52 <span class="se">\</span>
  -d <span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fwww.partner-app.com%2Fcallback <span class="se">\</span>
  -d <span class="nv">scope</span><span class="o">=</span>read_webhook%20write_newsletter_email <span class="se">\</span>
  -d <span class="nv">state</span><span class="o">=</span>2034590283
</code></pre>

<p>To begin the OAuth flow, the User is redirected to Conversio&rsquo;s authorize endpoint:</p>

<p><code class="prettyprint">https://app.conversio.com/oauth/authorize</code></p>

<p>Including the following parameters in the URL query string:</p>

<table><thead>
<tr>
<th style="text-align: right">Parameter</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>client_id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s ID. Should be provided by Conversio.</td>
</tr>
<tr>
<td style="text-align: right"><strong>redirect_uri:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where the User will be redirected. Must match the value saved for the Partner App.</td>
</tr>
<tr>
<td style="text-align: right"><strong>scope:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The scopes that the App wishes to access on behalf of the User. Space separated values.</td>
</tr>
<tr>
<td style="text-align: right"><strong>state:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A random string, at least 10 characters long, that is unique. This will be passed on to <code class="prettyprint">redirect_uri</code> when the User accepts or rejects the authorization, and should be validated to be the same.</td>
</tr>
</tbody></table>

<p>The User will be required to log-in to Conversio as needed.</p>

<p>If all required parameters are present and valid, the User can then review what permissions (scopes) are requested by which App. Conversely, any missing or invalid parameters will instead show an error page with a description of each problem.</p>

<p>At this point the User can Authorize or Reject the Authorization Request. When rejecting, the User will be redirected to <code class="prettyprint">redirect_uri</code> with the following parameters in the URL query string:</p>

<table><thead>
<tr>
<th style="text-align: right">Parameter</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>error:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>As per spec, will have the value &ldquo;access_denied&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>error_description:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Will be &ldquo;The user refused to authorize your App.&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>state:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Will be the same <code class="prettyprint">state</code> value sent on the first request.</td>
</tr>
</tbody></table>

<p>This ends the OAuth flow prematurely.</p>

<p>Conversely, when the User authorizes the App, an authorization <code class="prettyprint">code</code> is generated that is bound to that User, the requested scopes and <code class="prettyprint">redirect_uri</code>. The User is then redirected to <code class="prettyprint">redirect_uri</code> with the <code class="prettyprint">code</code> in the query params, and the same <code class="prettyprint">state</code> that was received in the request, starting step 2.</p>
<h4 id='step-2-receive-authorization-code'>Step 2: Receive Authorization Code</h4><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://www.partner-app.com/callback"</span> <span class="se">\</span>
  -G <span class="se">\</span>
  -X GET <span class="se">\</span>
  -d <span class="nv">code</span><span class="o">=</span>f85b6db85f79310aee955bf104caa2dfcb50e6a565f8f8837f44c6ded306 <span class="se">\</span>
  -d <span class="nv">state</span><span class="o">=</span>2034590283
</code></pre>

<p>At this point the User has authorized the Partner App to access their account on their behalf. They will be redirected to <code class="prettyprint">redirect_uri</code> and the URL query will include the following parameters:</p>

<table><thead>
<tr>
<th style="text-align: right">Parameter</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>code:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A 60 character hex string. This code represents the user&rsquo;s authorization and must be used to get an Access Token in step 3. It is single-use and short-lived, expiring in 3 minutes.</td>
</tr>
<tr>
<td style="text-align: right"><strong>state:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Must be the same value sent in the first request.</td>
</tr>
</tbody></table>

<p>The <code class="prettyprint">state</code> param&rsquo;s value should be validated. It is exactly the same value as was sent in the first step. This ensures that the User is coming from the original request, and that the <code class="prettyprint">code</code> isn&rsquo;t from an earlier request intercepted by an attacker.</p>

<p>The <code class="prettyprint">code</code> can now be used to request an Access Token from Conversio.</p>
<h4 id='step-3-exchange-code-for-access-token'>Step 3: Exchange Code for Access Token</h4><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/oauth/access-token"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Basic NTdiNWFhM2IwNDZhYmZiMDUzZDgwYjUyOndhdGNodS1sb29raW4tYXQ="</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="nv">code</span><span class="o">=</span>f85b6db85f79310aee955bf104caa2dfcb50e6a565f8f8837f44c6ded306 <span class="se">\</span>
  -d <span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fwww.partner-app.com%2Fcallback
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0aee955bf104caa2dfcb50e6a565f8"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pop"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To issue an <code class="prettyprint">access_token</code>, the received <code class="prettyprint">code</code> must be <code class="prettyprint">POST</code>ed to Conversio.</p>

<p>This request must use HTTPS and be Authenticated using <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic Access Authentication</a> using the App&rsquo;s ID as the username and the App&rsquo;s Client Secret as password. Both are provided by Conversio.</p>

<p>The POST body must have the <code class="prettyprint">application/x-www-form-urlencoded</code> MIME type and the following parameters:</p>

<table><thead>
<tr>
<th style="text-align: right">Parameter</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>code:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The 60 character code received in Step 2 of the flow.</td>
</tr>
<tr>
<td style="text-align: right"><strong>redirect_uri:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s redirect URI. It must be the exact same value as used to generate the <code class="prettyprint">code</code>.</td>
</tr>
</tbody></table>

<p>If the App is successfully authenticated, the <code class="prettyprint">redirect_uri</code> matches the App and the <code class="prettyprint">code</code> is valid, Conversio will return a new <code class="prettyprint">access_token</code> in JSON:</p>

<table><thead>
<tr>
<th style="text-align: right">Parameter</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>access_token:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A 30 character token bound to the User and requested Scopes. Must be kept secret.</td>
</tr>
<tr>
<td style="text-align: right"><strong>token_type:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Indicate&rsquo;s the token&rsquo;s type. Is &ldquo;pop&rdquo;.</td>
</tr>
</tbody></table>

<p>This <code class="prettyprint">access_token</code> can then be used to <a href="#authorizing-requests">authorize</a> any client when accessing the User&rsquo;s data.</p>
<h3 id='authorizing-requests'>Authorizing Requests</h3>
<p>As mentioned above, Conversio issues <a href="https://tools.ietf.org/html/draft-ietf-oauth-signed-http-request-03">PoP Access Tokens</a>. These add a layer of security on top of Bearer tokens, requiring Partner Apps to sign every request using their Client Secret.</p>

<p>Reading the Tokens draft &amp; JWS RFC will provide deeper understanding of what&rsquo;s going on, but to get started quickly we&rsquo;d recommend using a lib for the language being used. Some examples:</p>

<ol>
<li>JavaScript -&gt; <a href="https://github.com/brianloveswords/node-jws"><code class="prettyprint">npm install jws</code></a></li>
<li>Ruby -&gt; <a href="https://github.com/jwt/ruby-jwt"><code class="prettyprint">gem install jwt</code></a></li>
</ol>

<p>If the language used isn&rsquo;t listed, get in touch with us and we&rsquo;ll help out finding an appropriate alternative.</p>
<h4 id='generating-the-pop-token'>Generating the PoP Token</h4><pre class="highlight ruby"><code><span class="c1"># Ruby</span>
<span class="nb">require</span> <span class="s1">'jwt'</span>

<span class="n">client_secret</span> <span class="o">=</span> <span class="s1">'partner-app-client-secret'</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">at: </span><span class="s1">'pop-access-token'</span><span class="p">,</span> <span class="ss">ts: </span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span> <span class="p">}</span>

<span class="n">pop_token</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">encode</span> <span class="n">payload</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">,</span> <span class="s1">'HS256'</span>
<span class="c1"># &gt; "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdCI6IjEyMzQ1NiIsInRzIjoxMjM0NTY3OH0.J6DUAy9TopLOfIJHFbY2BNDankWID9ZvJ-ylHoV_a6k"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// JavaScript</span>
<span class="kr">const</span> <span class="nx">jws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jws'</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">clientSecret</span> <span class="o">=</span> <span class="s1">'partner-app-client-secret'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">{</span> <span class="na">typ</span><span class="p">:</span> <span class="s1">'JWT'</span><span class="p">,</span> <span class="na">alg</span><span class="p">:</span> <span class="s1">'HS256'</span> <span class="p">};</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="na">at</span><span class="p">:</span> <span class="s1">'pop-access-token'</span><span class="p">,</span> <span class="na">ts</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">};</span>

<span class="kr">const</span> <span class="nx">popToken</span> <span class="o">=</span> <span class="nx">jws</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="nx">header</span><span class="p">,</span> <span class="nx">payload</span><span class="p">,</span> <span class="na">secret</span><span class="p">:</span> <span class="nx">clientSecret</span> <span class="p">});</span>
<span class="c1">// &gt; 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdCI6IjEyMzQ1NiIsInRzIjoxMjM0NTY3OH0.Pocf1CzRha25nwCfoZynProYLcV1UE5SlcRGa3qzZXo'</span>
</code></pre>

<p>As a first step, the Access Token received from Conversio must be included in an Object (Hash for Ruby) at the key <code class="prettyprint">at</code>. In that object, the current Unix time must be defined at the key <code class="prettyprint">ts</code>. This timestamp is validated by Conversio to be within 3 minutes of current time, in an effort to prevent header reuse by attackers.</p>

<p>This object is then signed with HMAC, generating 3 Base64 encoded strings, separated by a period. This is the PoP Token.</p>

<p>We support three HMAC algorithms, <code class="prettyprint">HS256</code>, <code class="prettyprint">HS384</code> and <code class="prettyprint">HS512</code>.</p>
<pre class="highlight shell"><code><span class="c"># Example authorized request</span>
<span class="gp">$ </span>curl https://app.conversio.com/api/v1 <span class="se">\</span>
  -H <span class="s2">"Authorization: PoP eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdCI6IjEyMzQ1NiIsInRzIjoxMjM0NTY3OH0.Pocf1CzRha25nwCfoZynProYLcV1UE5SlcRGa3qzZXo
</span></code></pre>

<p>The PoP Token can then be included in a request&rsquo;s Authorization header, prefixed with the string &ldquo;PoP&rdquo;.</p>

<p>The server then decodes the PoP Token and validates the signature to both Authenticate the Partner App and Authorize its access to a User&rsquo;s account through the included Access Token.</p>
<h3 id='scopes'>Scopes</h3>
<p>Below is a table of the recognized scopes. Scopes that are prefixed with <code class="prettyprint">write_</code> provide read &amp; write access, while those with the <code class="prettyprint">read_</code> prefix provide access to read-only endpoints.</p>

<ul>
<li><code class="prettyprint">read_webhook</code>/<code class="prettyprint">write_webhook</code>: These allow accessing the registered webhooks for a User&rsquo;s account. With <code class="prettyprint">write_</code> one can also register new webhooks &amp; endpoints.</li>
<li><code class="prettyprint">read_newsletter_template</code>: Provides access to a User&rsquo;s Newsletter Templates. This includes contents and sending stats.</li>
<li><code class="prettyprint">read_newsletter_email</code>: Provides access to the list of emails associated with a sent Newsletter Template. Includes action timestamps (sentAt, openedAt, etc.) and email address info.</li>
<li><code class="prettyprint">read_async_job</code>: Provides access to Async Jobs, their statuses and results.</li>
<li><code class="prettyprint">read_segments</code>/<code class="prettyprint">write_segments</code>: Access to <a href="#customer-segments">Customer Segments</a>.</li>
<li><code class="prettyprint">read_customers</code>/<code class="prettyprint">write_customers</code>: Allows reading customer and subscriber data. Write scope allows unsubscribing emails from lists.</li>
<li><code class="prettyprint">read_customer_list</code>/<code class="prettyprint">write_customer_list</code>: Provides access to customer lists.</li>
</ul>
<h2 id='hmac'>HMAC</h2><pre class="highlight ruby"><code><span class="c1"># Ruby</span>
<span class="nb">require</span> <span class="s1">'jwt'</span>

<span class="n">client_secret</span> <span class="o">=</span> <span class="s1">'partner-app-client-secret'</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">iss: </span><span class="s1">'57b5aa3b046abfb053d80b52'</span> <span class="p">}</span>

<span class="n">pop_token</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">encode</span> <span class="n">payload</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">,</span> <span class="s1">'HS256'</span>
<span class="c1"># &gt; "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI1N2I1YWEzYjA0NmFiZmIwNTNkODBiNTIifQ.sxd8uG4EkeIXHsIIVELrfGTIZcaTFE9a9YY-8HGHuOQ"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Javascript</span>
<span class="kr">const</span> <span class="nx">jws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jws'</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">clientSecret</span> <span class="o">=</span> <span class="s1">'partner-app-client-secret'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">{</span> <span class="na">typ</span><span class="p">:</span> <span class="s1">'JWT'</span><span class="p">,</span> <span class="na">alg</span><span class="p">:</span> <span class="s1">'HS256'</span> <span class="p">};</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="na">iss</span><span class="p">:</span> <span class="s1">'57b5aa3b046abfb053d80b52'</span> <span class="p">};</span>

<span class="kr">const</span> <span class="nx">popToken</span> <span class="o">=</span> <span class="nx">jws</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="nx">header</span><span class="p">,</span> <span class="nx">payload</span><span class="p">,</span> <span class="na">secret</span><span class="p">:</span> <span class="nx">clientSecret</span> <span class="p">});</span>
<span class="c1">// &gt; 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI1N2I1YWEzYjA0NmFiZmIwNTNkODBiNTIifQ.sxd8uG4EkeIXHsIIVELrfGTIZcaTFE9a9YY-8HGHuOQ'</span>
</code></pre>
<pre class="highlight shell"><code><span class="c"># Example authorized request</span>
<span class="gp">$ </span>curl https://app.conversio.com/api/v1/partners/ <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI1N2I1YWEzYjA0NmFiZmIwNTNkODBiNTIifQ.sxd8uG4EkeIXHsIIVELrfGTIZcaTFE9a9YY-8HGHuOQ
</span></code></pre>

<p>This authentication type is used exclusively when accessing the <a href="#partner-apps-api">Partner Apps API</a> because it authenticates a Partner only, not a User. It is used on signed JSON Web Tokens with a JSON Web Signature.</p>

<p>The token must have an <code class="prettyprint">iss</code> entry set to the Partner App&rsquo;s ID. Then, it must be signed with the Client Secret and added to the Authorization header of each request, using the <code class="prettyprint">Bearer</code> schema.</p>

<p>All requests to the Partner Apps API must be authorized this way.</p>

          <h1 id='receipts'>Receipts</h1>
<p>Services related to sending using the <strong>Receipts API</strong></p>
<h2 id='all-receipts'>All Receipts</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/receipts?page=1&amp;limit=10"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"meta"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"first"</span><span class="p">:</span><span class="s2">"https://app.conversio.com/api/v1/receipts?page=1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"next"</span><span class="p">:</span><span class="s2">"https://app.conversio.com/api/v1/receipts?page=3"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"prev"</span><span class="p">:</span><span class="s2">"https://app.conversio.com/api/v1/receipts?page=1"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"last"</span><span class="p">:</span><span class="s2">"https://app.conversio.com/api/v1/receipts?page=5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"1e23df04"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"reference"</span><span class="p">:</span><span class="s2">"c_1e23d"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amountNotes"</span><span class="p">:</span><span class="s2">"Includes 19$ VAT"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"to"</span><span class="p">:</span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"from"</span><span class="p">:</span><span class="s2">"me@mybusiness.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"date"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"payment"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"last4"</span><span class="p">:</span><span class="mi">4242</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"reference"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w">
               </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Conversio subscription"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
               </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"http://foo/image.jpg"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"subtotals"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Delivery"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"9.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"billing"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"444-555-6464"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"john@acmewidgets.com"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"shipping"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"customerIp"</span><span class="p">:</span><span class="s2">"145.145.145.145"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"upsell"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="kc">true</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"1e23df04"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"reference"</span><span class="p">:</span><span class="s2">"c_1e23d"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"to"</span><span class="p">:</span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"from"</span><span class="p">:</span><span class="s2">"me@mybusiness.com"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"date"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"payment"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"last4"</span><span class="p">:</span><span class="mi">4242</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"reference"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w">
               </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Conversio subscription"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
               </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"http://foo/image.jpg"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"subtotals"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Delivery"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"9.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">],</span><span class="w">
         </span><span class="nt">"billing"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"444-555-6464"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"john@acmewidgets.com"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"shipping"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"customerIp"</span><span class="p">:</span><span class="s2">"145.145.145.145"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"upsell"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="kc">false</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-receipts-get'>List all Receipts [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/receipts</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>page:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The page number</td>
</tr>
<tr>
<td style="text-align: right"><strong>limit:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Number of results per page</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='send'>Send</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/receipts"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
       "reference":"c_1e23d",
       "currency":"USD",
       "amount":"0.00",
       "amountNotes":"Includes 19$ VAT",
       "to":"customer@email.com",
       "from":"me@mybusiness.com",
       "date":1410715640,
       "payment":{
          "type":"VISA",
          "last4":4242
       },
       "items":[
          {
             "reference":123,
             "description":"Conversio subscription",
             "quantity":1,
             "amount":"39.99",
             "image":"http://foo/image.jpg",
             "metas": [{
               "key": "Color",
               "value": "Red"
             }]
          }
       ],
       "subtotals":[
          {
             "description":"Delivery",
             "amount":"9.00"
          }
       ],
       "billing":{
          "address":{
             "firstName":"John",
             "lastName":"Doe",
             "company":"Acme Widgets",
             "addressLine1":"111 Main",
             "addressLine2":"Suite 101",
             "city":"New York",
             "state":"NY",
             "postcode":"10012",
             "country":"US"
          },
          "phone":"444-555-6464",
          "email":"john@acmewidgets.com"
       },
       "shipping":{
          "firstName":"John",
          "lastName":"Doe",
          "company":"Acme Widgets",
          "addressLine1":"111 Main",
          "addressLine2":"Suite 101",
          "city":"New York",
          "state":"NY",
          "postcode":"10012",
          "country":"US"
       },
       "customerIp":"145.145.145.145",
       "notes":"Products require individual packaging",
       "coupons":[
         "abcd-1234-5678"
       ]
    }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"1e23df04"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"reference"</span><span class="p">:</span><span class="s2">"c_1e23d"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amountNotes"</span><span class="p">:</span><span class="s2">"Includes 19$ VAT"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"to"</span><span class="p">:</span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"from"</span><span class="p">:</span><span class="s2">"me@mybusiness.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"date"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last4"</span><span class="p">:</span><span class="mi">4242</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"reference"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Conversio subscription"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"http://foo/image.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"subtotals"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Delivery"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"9.00"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"billing"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"444-555-6464"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"john@acmewidgets.com"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"shipping"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"customerIp"</span><span class="p">:</span><span class="s2">"145.145.145.145"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"upsell"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="kc">true</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-a-new-receipt-post'>Create a new receipt [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/receipts</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>reference:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Sale reference or unique identifier</td>
</tr>
<tr>
<td style="text-align: right"><strong>currency:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>ISO 4217 currency code</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Receipt total, including deductions</td>
</tr>
<tr>
<td style="text-align: right"><strong>amountNotes:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Notes to add close to receipt amount (eg. &ldquo;Includes taxes&rdquo;)</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Receipt recipient&rsquo;s email address</td>
</tr>
<tr>
<td style="text-align: right"><strong>from:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to be displayed in the from field</td>
</tr>
<tr>
<td style="text-align: right"><strong>date:</strong></td>
<td><strong>number/string, optional</strong>, <em>default is now</em></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The date the order was completed, can be a unix timestamp or UTC date. e.g. &lsquo;2013-02-04T10:35:24-08:00&rsquo; or 1410715640</td>
</tr>
<tr>
<td style="text-align: right"><strong>payment:</strong></td>
<td><strong>object, optional</strong>, <em>default is null</em></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The display details of the payment that completed the sale. Children:<ul><li><strong>Type</strong>, <em>VISA</em></li><li><strong>Last4</strong>, <em>4242</em></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>items:</strong></td>
<td><strong>array, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The items sold. Children:<ul><li><strong>reference</strong>, <em>optional, c_123</em></li><li><strong>description</strong>, <em>Conversio Hobby Plan</em></li><li><strong>quantity</strong>, <em>optional, 1</em></li><li><strong>amount</strong>, <em>29.00</em></li><li><strong>url</strong>, <em>http://conversio.com/download/123</em></li><li><strong>metas</strong>, <em>optional, [{ &ldquo;key&rdquo;: &ldquo;Color&rdquo;, &ldquo;value&rdquo;: &ldquo;Red&rdquo; }]</em></li><li><strong>image</strong>, <em>optional, http://foo/image.jpg</em></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>subtotals:</strong></td>
<td><strong>array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>any extra fields that are required before the total is displayed, e.g. discounts, delivery. Children:<ul><li><strong>description</strong>, <em>Delivery</em></li><li><strong>amount</strong>, <em>9.99</em></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>billing:</strong></td>
<td><strong>object, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>the customer&rsquo;s billing details. Children:<ul><li><strong>address</strong><ul><li><strong>firstName</strong>, <em>Joe</em></li><li><strong>lastName</strong>, <em>Smith</em></li><li><strong>company</strong>, <em>Conversio</em></li><li><strong>addressLine1</strong>, <em>30 Broadway</em></li><li><strong>AddressLine2</strong>, <em>Manhattan</em></li><li><strong>city</strong>, <em>New York</em></li><li><strong>state</strong>, <em>New York</em></li><li><strong>postcode</strong>, <em>10001</em></li><li><strong>country</strong>, <em>USA</em></li></ul></li><li><strong>phone</strong>, <em>518-111-1111</em></li><li><strong>email</strong>, <em>help@conversio.com</em></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>shipping:</strong></td>
<td><strong>object, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>the customer&rsquo;s shipping details. Children:<ul><li><strong>firstName</strong>, <em>Joe</em></li><li><strong>lastName</strong>, <em>Smith</em></li><li><strong>company</strong>, <em>Conversio</em></li><li><strong>addressLine1</strong>, <em>30 Broadway</em></li><li><strong>AddressLine2</strong>, <em>Manhattan</em></li><li><strong>city</strong>, <em>New York</em></li><li><strong>state</strong>, <em>New York</em></li><li><strong>postcode</strong>, <em>10001</em></li><li><strong>country</strong>, <em>USA</em></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>upsell:</strong></td>
<td><strong>object, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>details related to the upsell. Children:<ul><li><strong>products</strong><ul><li>array of<ul><li><strong>title</strong>, Product 1</li><li><strong>description</strong>, Lorem ipsum</li><li><strong>image</strong>, http://foo/image.jpg</li><li><strong>actionUrl</strong>, http://foo/product-1/</li></ul></li></ul></td>
</tr>
<tr>
<td style="text-align: right"><strong>customerIp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>the IP Address of the connection that completed the sale</td>
</tr>
<tr>
<td style="text-align: right"><strong>notes:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>any notes to be added to the receipt</td>
</tr>
<tr>
<td style="text-align: right"><strong>coupons:</strong></td>
<td><strong>array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>an array of strings that represent all of the coupon codes used with the order</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 201 (application/json)
</aside></p>
<h2 id='receipt'>Receipt</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/receipts/a1b2c3d4"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"1e23df04"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"reference"</span><span class="p">:</span><span class="s2">"c_1e23d"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"to"</span><span class="p">:</span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"from"</span><span class="p">:</span><span class="s2">"me@mybusiness.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"date"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last4"</span><span class="p">:</span><span class="mi">4242</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"reference"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Conversio subscription"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"http://foo/image.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"subtotals"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Delivery"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"9.00"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"billing"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"444-555-6464"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"john@acmewidgets.com"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"shipping"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"customerIp"</span><span class="p">:</span><span class="s2">"145.145.145.145"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"upsell"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="kc">true</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='retrieve-a-receipt-get'>Retrieve a receipt [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/receipts/{RECEIPT_ID}</code></p>

<p>A single Receipt with all of its details</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the receipt supplied in the response from the send of a receipt.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='resend'>Resend</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/receipts/1a2b3c4d/send"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"_id"</span><span class="p">:</span><span class="s2">"1e23df04"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"reference"</span><span class="p">:</span><span class="s2">"c_1e23d"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"to"</span><span class="p">:</span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"from"</span><span class="p">:</span><span class="s2">"me@mybusiness.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"date"</span><span class="p">:</span><span class="s2">"2015-01-07T10:02:13.915Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last4"</span><span class="p">:</span><span class="mi">4242</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"reference"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Conversio subscription"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"http://foo/image.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"subtotals"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Delivery"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"9.00"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nt">"billing"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"444-555-6464"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"john@acmewidgets.com"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"shipping"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"company"</span><span class="p">:</span><span class="s2">"Acme Widgets"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine1"</span><span class="p">:</span><span class="s2">"111 Main"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="s2">"Suite 101"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postcode"</span><span class="p">:</span><span class="s2">"10012"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"customerIp"</span><span class="p">:</span><span class="s2">"145.145.145.145"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"upsell"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="kc">true</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='resend-a-receipt-post'>Resend a Receipt [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/receipts/{RECEIPT_ID}/send</code></p>

<p>Resend a receipt using the id.</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the receipt supplied in the response from the send of a receipt.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='bulk-sync'>Bulk Sync</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/receipts/bulk"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'[{
       "reference":"c_1e23d",
       "currency":"USD",
       "amount":"0.00",
       "amountNotes":"Includes 19$ VAT",
       "to":"customer@email.com",
       "from":"me@mybusiness.com",
       "date":1410715640,
       "status": "completed",
       "payment":{
          "type":"VISA",
          "last4":4242
       },
       "items":[
          {
             "reference":123,
             "description":"Conversio subscription",
             "quantity":1,
             "amount":"39.99",
             "image":"http://foo/image.jpg",
             "metas": [{
               "key": "Color",
               "value": "Red"
             }]
          }
       ],
       "subtotals":[
          {
             "description":"Delivery",
             "amount":"9.00"
          }
       ],
       "billing":{
          "address":{
             "firstName":"John",
             "lastName":"Doe",
             "company":"Acme Widgets",
             "addressLine1":"111 Main",
             "addressLine2":"Suite 101",
             "city":"New York",
             "state":"NY",
             "postcode":"10012",
             "country":"US"
          },
          "phone":"444-555-6464",
          "email":"john@acmewidgets.com"
       },
       "shipping":{
          "firstName":"John",
          "lastName":"Doe",
          "company":"Acme Widgets",
          "addressLine1":"111 Main",
          "addressLine2":"Suite 101",
          "city":"New York",
          "state":"NY",
          "postcode":"10012",
          "country":"US"
       },
       "customerIp":"145.145.145.145"
    },{
       "reference":"c_2e23d",
       "currency":"USD",
       "amount":"1.00",
       "amountNotes":"Includes 19$ VAT",
       "to":"customer@email.com",
       "from":"me@mybusiness.com",
       "date":1410715640,
       "status": "cancelled",
       "payment":{
          "type":"VISA",
          "last4":4242
       },
       "items":[
          {
             "reference":123,
             "description":"Conversio subscription",
             "quantity":1,
             "amount":"39.99",
             "image":"http://foo/image.jpg",
             "metas": [{
               "key": "Color",
               "value": "Red"
             }]
          }
       ],
       "subtotals":[
          {
             "description":"Delivery",
             "amount":"9.00"
          }
       ],
       "billing":{
          "address":{
             "firstName":"John",
             "lastName":"Doe",
             "company":"Acme Widgets",
             "addressLine1":"111 Main",
             "addressLine2":"Suite 101",
             "city":"New York",
             "state":"NY",
             "postcode":"10012",
             "country":"US"
          },
          "phone":"444-555-6464",
          "email":"john@acmewidgets.com"
       },
       "shipping":{
          "firstName":"John",
          "lastName":"Doe",
          "company":"Acme Widgets",
          "addressLine1":"111 Main",
          "addressLine2":"Suite 101",
          "city":"New York",
          "state":"NY",
          "postcode":"10012",
          "country":"US"
       },
       "customerIp":"145.145.145.145"
    }]'</span>
</code></pre>
<h3 id='bulk-sync-post'>Bulk Sync [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/receipts/bulk</code></p>

<p>Synchronize many receipts at once <em>without sending the receipts</em>. This is used to create a Receipt history for the recommendation engine. It <strong>will not create</strong> the receipts in Conversio.</p>

<p><aside class="notice">
You can upload 250 receipts per request.
</aside></p>
<h3 id='arguments'>Arguments</h3>
<p><aside class="notice">
The receipt structure is the same as for <a href="#send">Send</a> except that you should
enclose the receipts in an array (see example request) and you can include a
<code class="prettyprint">status</code> field to indicate if the historic order was actually completed or not.
See below.
</aside></p>

<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Status of the receipt, valid values are &ldquo;pending&rdquo;, &ldquo;completed&rdquo;, &ldquo;cancelled&rdquo; and &ldquo;refunded&rdquo;</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (success)</p>

<p>All receipts are valid.
</aside></p>

<p><aside class="success">
Response 202 (partial success)</p>

<p>Some receipts are valid and some are invalid. The response specifies which
receipts failed to validate.</p>

<p>Valid receipts are accepted and processed and should <em>not</em> be re-uploaded.
</aside></p>

          <h1 id='coupons'>Coupons</h1>
<p>Services related to retreiving coupons using the <strong>Coupons API</strong></p>
<h2 id='all-coupons'>All Coupons</h2><pre class="highlight shell"><code><span class="c"># DEFINITION</span>
GET https://app.conversio.com/api/v1/coupons

<span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/coupons"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"meta"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"next"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
         </span><span class="nt">"prev"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
         </span><span class="nt">"last"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
         </span><span class="nt">"first"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"54G2-DHM0-50NL"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">https://app.conversio.com/api/v1/coupons</code></p>

<p>Get a list of all coupons</p>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='get-a-coupon'>Get a coupon</h2><pre class="highlight shell"><code><span class="c"># DEFINITION</span>
GET https://app.conversio.com/api/v1/coupons/1a2b3c4d

<span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/coupons/1a2b3c4d"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">https://app.conversio.com/api/v1/coupons/{COUPON_ID}</code></p>

<p>A single coupon with all of its details</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the coupon supplied in the response from the send of a receipt.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='delete-a-coupon'>Delete a coupon</h2><pre class="highlight shell"><code><span class="c"># DEFINITION</span>
DELETE https://app.conversio.com/api/v1/coupons/1a2b3c4d

<span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/coupons/1a2b3c4d"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<p><code class="prettyprint">https://app.conversio.com/api/v1/coupons/{COUPON_ID}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the coupon supplied in the response from the send of a receipt.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 204 (application/json)
</aside></p>
<h2 id='mark-coupon-as-used'>Mark coupon as used</h2><pre class="highlight shell"><code><span class="c"># DEFINITION</span>
PUT https://app.conversio.com/api/v1/coupons/1a2b3c4d/use

<span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/coupons/1a2b3c4d/use"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -X PUT
  -d <span class="s1">'{
    "reference": "1234",
    "amount": 123,
    "currency": "USD"
  }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"upsellType"</span><span class="p">:</span><span class="s2">"coupon"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Lorem ipsum"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"freeShipping"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"couponCode"</span><span class="p">:</span><span class="s2">"55G2-DHM0-50NN"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nt">"usedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1410788324"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
       </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
     </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">https://app.conversio.com/api/v1/coupons/{COUPON_ID}/use</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the coupon supplied in the response from the send of a receipt.</td>
</tr>
<tr>
<td style="text-align: right"><strong>reference:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>String based <code class="prettyprint">id</code> of the generated order by the coupon.</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount:</strong></td>
<td><strong>float, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Amount of the generated order.</td>
</tr>
<tr>
<td style="text-align: right"><strong>currency:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Currency of the amount generated.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>

          <h1 id='products'>Products</h1>
<p>Services related to sending product updates using the <strong>Products API</strong>.
These endpoints must be used to send updates about products for our reccommendation engine.</p>
<h2 id='create-product'>Create product</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST (SINGLE PRODUCT)</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/products"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "product_id": "ipa_12345",
    "type": "beer",
    "brand": "StefanoS",
    "title": "Refreshing IPA by StefanoS",
    "description": "This IPA is awesome and brought to you by the legendary StefanoS",
    "hidden": false,
    "url": "https://stefanos.beer/products/ipa_12345",
    "tags": [ "ipa", "beer", "refreshing" ],
    "images": [
      { "position": 1, "url": "https://stefanos.beer/img/ipa_12345_1.jpg" },
      { "position": 2, "url": "https://stefanos.beer/img/ipa_hej.jpg" }
    ],
    "variants": [
      { "price": 10.0 },
      { "price": 15.0 }
    ],
    "categories": [
      {
        "category_id": "category_1234",
        "title": "IPA category",
        "description": "A category of good IPAs",
        "url": "https://stefanos.beer/categories/category_1234"
      }
    ]
  }'</span>
</code></pre>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST (MULTIPLE PRODUCTS)</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/products"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'[{
    "product_id": "ipa_12345",
    "type": "beer",
    "brand": "StefanoS",
    "title": "Refreshing IPA by StefanoS",
    "description": "This IPA is awesome and brought to you by the legendary StefanoS",
    "hidden": false,
    "url": "https://stefanos.beer/products/ipa_12345",
    "tags": [ "ipa", "beer", "refreshing" ],
    "images": [
      { "position": 1, "url": "https://stefanos.beer/img/ipa_12345_1.jpg" },
      { "position": 2, "url": "https://stefanos.beer/img/ipa_hej.jpg" }
    ],
    "variants": [
      { "price": 10.0 },
      { "price": 15.0 }
    ],
    "categories": [
      {
        "category_id": "category_1234",
        "title": "IPA category",
        "description": "A category of good IPAs",
        "url": "https://stefanos.beer/categories/category_1234"
      }
    ]
  },
  {
    "product_id": "wheat_54321",
    "type": "beer",
    "brand": "StefanoS",
    "title": "Refreshing wheat beer by StefanoS",
    "description": "This lovely golden wheat is perfect on a hot Summer day.",
    "hidden": false,
    "url": "https://stefanos.beer/products/wheat_54321",
    "tags": [ "ipa", "beer", "refreshing" ],
    "images": [
      { "position": 1, "url": "https://stefanos.beer/img/wheat_54321.jpg" }
    ],
    "variants": [
      { "price": 5.0 }
    ],
    "categories": [
      {
        "category_id": "category_4321",
        "title": "Wheat category",
        "description": "A category of good wheat beers",
        "url": "https://stefanos.beer/categories/category_4321"
      }
    ]
  }]'</span>
</code></pre>
<h3 id='create-one-or-more-new-products-post'>Create one or more new products [POST]</h3>
<p><code class="prettyprint">POST https://app.conversio.com/api/v1/products</code></p>
<h3 id='arguments'>Arguments</h3>
<p><aside class="notice">
The endpoint accepts a <em>single</em> product object or <em>multiple</em> products in an
array. See examples on the right.
</aside></p>

<p><aside class="notice">
You can upload 250 products per request.
</aside></p>
<h4 id='main-object-product'>Main object (product)</h4>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>brand:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The brand or vendor for the product, e.g.  &lsquo;Apple&rsquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>categories:</strong></td>
<td><strong>category array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A list of categories that the product belong to.</td>
</tr>
<tr>
<td style="text-align: right"><strong>description:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The description of the product, for example &lsquo;A very nice soccer ball, updated for the needs of 2014.&rsquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>hidden:</strong></td>
<td><strong>boolean, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Indicates whether the product is currently hidden.</td>
</tr>
<tr>
<td style="text-align: right"><strong>images:</strong></td>
<td><strong>image array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A list of images for the product.</td>
</tr>
<tr>
<td style="text-align: right"><strong>product_id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the product.</td>
</tr>
<tr>
<td style="text-align: right"><strong>tags:</strong></td>
<td><strong>string array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A list of tags for the product.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title of the product, for example &lsquo;Soccer Ball 2014&rsquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>type:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The type of the product, e.g. &lsquo;ball&rsquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>url:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The full or relative url for the product, for example &lsquo;http://example.com/products/soccer-ball-2014&rsquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>variants:</strong></td>
<td><strong>variant array, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A list of product variants. The price of a product is always stored in a variant.</td>
</tr>
</tbody></table>
<h4 id='category'>Category</h4>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>category_id:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the category.</td>
</tr>
<tr>
<td style="text-align: right"><strong>description:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The description of the category.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title of the category, for example &lsquo;Soccer Balls&rsquo;</td>
</tr>
<tr>
<td style="text-align: right"><strong>url:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The full or relative url for the category, for example &lsquo;http://example.com/category/soccer-balls&rsquo;.</td>
</tr>
</tbody></table>
<h4 id='image'>Image</h4>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>position:</strong></td>
<td><strong>integer, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The position of the image compared to other images for the same product.</td>
</tr>
<tr>
<td style="text-align: right"><strong>url:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The url where the image is stored.</td>
</tr>
</tbody></table>
<h4 id='variant'>Variant</h4>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>price:</strong></td>
<td><strong>float, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The price of the variant.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (success)</p>

<p>All products are valid.
</aside></p>

<p><aside class="success">
Response 202 (partial success)</p>

<p>Some products are valid and some are invalid. The response specifies which
products failed to validate.</p>

<p>Valid products are accepted and processed and should <em>not</em> be re-uploaded.
</aside></p>
<h2 id='update-product'>Update product</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/products/{product_id}"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{
    "product_id": "ipa_12345",
    "type": "beer",
    "brand": "StefanoS",
    "title": "Refreshing IPA by StefanoS",
    "description": "This IPA is awesome and brought to you by the legendary StefanoS",
    "hidden": false,
    "url": "https://stefanos.beer/products/ipa_12345",
    "tags": [ "ipa", "beer", "refreshing" ],
    "images": [
      { "position": 1, "url": "https://stefanos.beer/img/ipa_12345_1.jpg" },
      { "position": 2, "url": "https://stefanos.beer/img/ipa_hej.jpg" }
    ],
    "variants": [
      { "price": 10.0 },
      { "price": 15.0 }
    ],
    "categories": [
      {
        "category_id": "category_1234",
        "title": "IPA category",
        "description": "A category of good IPAs",
        "url": "https://stefanos.beer/categories/category_1234"
      }
    ]
  }'</span>
</code></pre>
<h3 id='update-a-product-put'>Update a product [PUT]</h3>
<p><code class="prettyprint">PUT https://app.conversio.com/api/v1/products/{product_id}</code></p>
<h3 id='arguments'>Arguments</h3>
<p><aside class="notice">
The product structure is the same as for <a href="#create-product">Create a product</a>
except that you can only update a single product.
</aside>
<aside class="warning">
Notice that the product should always be a <em>full</em> representation, <strong>not</strong> a
partial. The API does not support partial updates.
</aside></p>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='delete-product'>Delete product</h2><h3 id='delete-a-product-delete'>Delete a product [DELETE]</h3><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/products/{product_id}"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X DELETE<span class="s1">'
</span></code></pre>

<p><code class="prettyprint">DELETE https://app.conversio.com/api/v1/products/{product_id}</code></p>

<p><aside class="success">
Response 204 (application/json)
</aside></p>

          <h1 id='product-reviews'>Product Reviews</h1>
<p>Endpoints for getting data on existing Product Reviews from Customers.</p>
<h2 id='list-product-reviews'>List Product Reviews</h2>
<p>Returns reviews from the most recently created.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/product-reviews?limit=2&amp;page=2"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome!"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Taste and texture were all on point! ++ would buy again."</span><span class="p">,</span><span class="w">
      </span><span class="nt">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nt">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"happyguy@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"archived"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"visible"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"isTest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-30T10:20:00.000Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b59"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Quality Stuff"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product was great, but shipping took two weeks."</span><span class="p">,</span><span class="w">
      </span><span class="nt">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nt">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65443335"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mehdude@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"archived"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"visible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"isTest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prevPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/product-reviews?page=1&amp;limit=2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nextPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/product-reviews?page=3&amp;limit=2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-product-reviews-get'>List all Product Reviews [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/product-reviews</code></p>

<p><em>OAuth Scopes</em>: read_product_reviews, write_product_reviews</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>limit:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many Reviews to return. Default is 10.</td>
</tr>
<tr>
<td style="text-align: right"><strong>page:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Which page of Reviews to return. Default is 1.</td>
</tr>
<tr>
<td style="text-align: right"><strong>visible:</strong></td>
<td><strong>bool, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether to return only visible (those that may appear in widgets) reviews or invisible.</td>
</tr>
<tr>
<td style="text-align: right"><strong>archived:</strong></td>
<td><strong>bool, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether to return reviews that have been archived by the user. Default is <code class="prettyprint">false</code>. Pass an empty string to disable this filter.</td>
</tr>
<tr>
<td style="text-align: right"><strong>test:</strong></td>
<td><strong>bool, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether to return reviews created from test followups. Default is <code class="prettyprint">false</code>. Pass an empty string to disable this filter.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is an Array with <code class="prettyprint">limit</code> Product Reviews in the shop, sorted by created date (recent on top). It also returns a <code class="prettyprint">meta</code> key with paging info.</p>

<p>Each Product Review object includes the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Product Review&rsquo;s ID. Currently unused.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Review&rsquo;s title.</td>
</tr>
<tr>
<td style="text-align: right"><strong>comment:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Review&rsquo;s long comment.</td>
</tr>
<tr>
<td style="text-align: right"><strong>rating:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Review&rsquo;s rating, 1 to 5.</td>
</tr>
<tr>
<td style="text-align: right"><strong>productId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Product that was reviewed.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerEmail:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address of the reviewer. May not exist when anonymous.</td>
</tr>
<tr>
<td style="text-align: right"><strong>createdAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the Product Review was created. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>archived:</strong></td>
<td><strong>bool</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A User may Archive a Product Review as a soft delete. Archived reviews aren&rsquo;t shown in Widgets.</td>
</tr>
<tr>
<td style="text-align: right"><strong>visible:</strong></td>
<td><strong>bool</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Only <code class="prettyprint">visible</code> reviews can appear in Widgets.</td>
</tr>
<tr>
<td style="text-align: right"><strong>isTest:</strong></td>
<td><strong>bool</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this Review was created from a test FollowUp Email.</td>
</tr>
</tbody></table>

          <h1 id='abandoned-carts'>Abandoned Carts</h1>
<p>Services related to managing <strong>Abandoned Carts</strong>. For the Email Campaigns triggered by Abandoned Carts, go to <a href="#abandoned-cart-emails">the next section</a>.</p>
<h2 id='create'>Create</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
       "token":"sometoken",
       "customer":"some@customer.com",
       "currency":"USD",
       "amount":"39.99",
       "items":[
          {
             "reference":"rct",
             "variant":"rct2",
             "description":"Conversio subscription",
             "quantity":1,
             "amount":"39.99",
             "attributes":[{ "key": "foo", "value": "bar" }]
          }
       ]
    }'</span>
</code></pre>

<blockquote>
<p>RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<h3 id='create-or-update-a-cart-post'>Create or Update a Cart [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>token:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Cart token or unique identifier</td>
</tr>
<tr>
<td style="text-align: right"><strong>customer:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Email address of the customer to whom the cart belongs</td>
</tr>
<tr>
<td style="text-align: right"><strong>currency:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>ISO 4217 currency code</td>
</tr>
<tr>
<td style="text-align: right"><strong>amount:</strong></td>
<td><strong>number, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The total amount for the cart</td>
</tr>
<tr>
<td style="text-align: right"><strong>items:</strong></td>
<td><strong>[object], required, <em>see below</em></strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The items inside the cart.</td>
</tr>
</tbody></table>
<h4 id='items'>Items</h4>
<p>The items inside the cart. Object contents:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>reference:</strong></td>
<td><strong>string, optional</strong></td>
<td><em>c_123</em></td>
</tr>
<tr>
<td style="text-align: right"><strong>variant:</strong></td>
<td><strong>string, optional</strong></td>
<td><em>c_123_2</em></td>
</tr>
<tr>
<td style="text-align: right"><strong>description:</strong></td>
<td><strong>string, required</strong></td>
<td><em>Conversio Hobby Plan</em></td>
</tr>
<tr>
<td style="text-align: right"><strong>quantity:</strong></td>
<td><strong>number, optional</strong></td>
<td><em>1</em></td>
</tr>
<tr>
<td style="text-align: right"><strong>amount:</strong></td>
<td><strong>number, required</strong></td>
<td><em>29.00</em></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A single item&rsquo;s price.</td>
<td></td>
</tr>
<tr>
<td style="text-align: right"><strong>attributes:</strong></td>
<td><strong>[object], optional</strong></td>
<td><em>[{ key: &ldquo;foo&rdquo;, value: &ldquo;bar&rdquo; }]</em></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Item attributes. See below.</td>
<td></td>
</tr>
</tbody></table>
<h5 id='attributes'>Attributes</h5>
<p>Item attributes:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>key:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"><strong>value:</strong></td>
<td><strong>string, required</strong></td>
</tr>
</tbody></table>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='delete-an-abandoned-cart'>Delete an abandoned cart</h2><pre class="highlight shell"><code><span class="c"># DEFINITION</span>
DELETE https://app.conversio.com/api/v1/abandoned-carts/1a2b3c4d

<span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts/1a2b3c4d"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<p><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/{TOKEN}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>token:</strong></td>
<td><strong>string, required</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Cart token or unique identifier.</td>
</tr>
</tbody></table>

<p><aside class="success">
Response 204 (application/json)
</aside></p>

          <h1 id='abandoned-cart-emails'>Abandoned Cart Emails</h1>
<p>Endpoints for viewing data of emails triggered by abandoned carts, and their customer interaction stats. For the Abandoned Carts themselves, go to <a href="#abandoned-carts">the previous section</a>.</p>
<h2 id='list-abandoned-cart-campaigns'>List Abandoned Cart Campaigns</h2>
<p>Returns a list of the Abandoned Cart Campaigns in the User&rsquo;s account.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts/campaigns </span><span class="se">\</span><span class="s2">
  -H "</span>X-ApiKey: YOUR_API_KEY<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>Accept: application/json<span class="s2">"
</span></code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Campaign for Potential Customers"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerSegmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b59"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"abandonedCartTemplates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d76b79"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b59"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Entice Existing Customers"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"abandonedCartTemplates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d76b81"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d76b56"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-campaigns-get'>List all Campaigns [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/campaigns</code></p>

<p><em>OAuth Scopes</em>: read_abandoned_cart_campaign, write_abandoned_cart_campaign</p>

<p><aside class="success">
  Response 200
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is an Array with all the campaigns in the shop.</p>

<p>Each Campaign object includes the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Campaigns&rsquo;s ID. Use it when calling single-campaign endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Campaign&rsquo;s title, set by the User.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegmentId:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Campaign&rsquo;s Customer Segment, if one was selected.</td>
</tr>
<tr>
<td style="text-align: right"><strong>enabled</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether the Campaign is enabled, i.e. sending emails to customers.</td>
</tr>
<tr>
<td style="text-align: right"><strong>abandonedCartTemplates:</strong></td>
<td><strong>array[object]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A collection of all the Abandoned Cart Templates that belong to the campaign. Includes only the IDs of the templates.</td>
</tr>
</tbody></table>
<h2 id='view-abandoned-cart-campaign'>View Abandoned Cart Campaign</h2>
<p>Returns an Abandoned Cart Campaign in the User&rsquo;s account.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts/campaigns/57b5aa3b046abfb053d80b52 </span><span class="se">\</span><span class="s2">
  -H "</span>X-ApiKey: YOUR_API_KEY<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>Accept: application/json<span class="s2">"
</span></code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Campaign for Potential Customers"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customerSegmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b59"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"abandonedCartTemplates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d76b81"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d76b56"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-single-campaign-get'>Show Single Campaign [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/campaigns/{CAMPAIGN_ID}</code></p>

<p><em>OAuth Scopes</em>: read_abandoned_cart_campaign, write_abandoned_cart_campaign</p>

<p><aside class="success">
  Response 200
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is the Campaign for the ID. The Campaign has the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Campaigns&rsquo;s ID. Use it when calling single-campaign endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Campaign&rsquo;s title, set by the User.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegmentId:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Campaign&rsquo;s Customer Segment, if one was selected.</td>
</tr>
<tr>
<td style="text-align: right"><strong>enabled</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether the Campaign is enabled, i.e. sending emails to customers.</td>
</tr>
<tr>
<td style="text-align: right"><strong>abandonedCartTemplates:</strong></td>
<td><strong>array[object]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A collection of all the Abandoned Cart Templates that belong to the campaign. Includes only the IDs of the templates.</td>
</tr>
</tbody></table>
<h2 id='view-abandoned-cart-template'>View Abandoned Cart Template</h2>
<p>Returns an Abandoned Cart Template. This contains the basis for the content of each of its emails, as well as the trigger delay for an email to be sent.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts/templates/57b5aa3b046abfb053d80b52 </span><span class="se">\</span><span class="s2">
  -H "</span>X-ApiKey: YOUR_API_KEY<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>Accept: application/json<span class="s2">"
</span></code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"campaignId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d89b69"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You forgot some goodies!"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First Abandoned Cart Email"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"rule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delay"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"periodHours"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"contentModules"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-abandoned-cart-template-get'>Show Abandoned Cart Template [GET]</h3>
<p>Two possible endpoints:</p>

<ol>
<li><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/templates/{TEMPLATE_ID}</code></li>
<li><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/campaigns/{CAMPAIGN_ID}/templates/{TEMPLATE_ID}</code></li>
</ol>

<p><em>OAuth Scopes</em>: read_abandoned_cart_template, write_abandoned_cart_template</p>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Email not found. One of the following happened:
  <ul>
    <li>The given TEMPLATE_ID does not belong to an existing template, if provided</li>
    <li>The given CAMPAIGN_ID does not belong to an existing email, if provided</li>
    <li>The requested template belongs to another shop than authenticated</li>
    <li>The requested template belongs to another campaign than indicated</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which contains an object representation of the requested abandoned cart template:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>campaignId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this template&quot;s Campaign.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subject:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The subject used in the emails triggered by this template. May have user variables (e.g.: {firstName}).</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The template&quot;s title, not customer-facing.</td>
</tr>
<tr>
<td style="text-align: right"><strong>rule:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Rule for triggering an email from this template. Currently only &ldquo;delay&rdquo; is supported, which is a delay from a cart being abandoned.</td>
</tr>
<tr>
<td style="text-align: right"><strong>period:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many days must pass after the cart is abandoned to trigger an email from this template. Accumulates with <code class="prettyprint">periodHours</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>periodHours:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many hours must pass after the cart is abandoned to trigger an email from this template. Accumulates with <code class="prettyprint">period</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>contentModules:</strong></td>
<td><strong>array</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of the Content Modules in a template. These represent the content (copy, images, discounts, etc.) in a template. More details below.</td>
</tr>
</tbody></table>
<h4 id='content-modules'>Content Modules</h4><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"contentModules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You left all of this stuff behind!"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abandonedCart"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Quantity"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"unitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit Price"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"totalOrder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"buttonColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#1990FF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primaryColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#1990FF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"secondaryColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#0076E4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"mainBackgroundColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#f8f8f8"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"actionTitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Get All My Stuff!"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discountCoupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You Stuff, At a Discount!"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{firstName}}, there"</span><span class="err">s</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">way</span><span class="w"> </span><span class="err">you</span><span class="s2">"re leaving all that stuff in the cart. Grab this discount and check-out now!"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"actionTitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Start Shopping"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expiresOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Expires On"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primaryColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#1990FF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expiryPeriod"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"couponType"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"backgroundColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#f8f8f8"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"onePerUser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"usageLimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each module has a <code class="prettyprint">position</code> and a <code class="prettyprint">type</code>. The 0-based position indicates where in the email the module appears (starting from top) and the type defines the kind of content.</p>

<p>The module&quot;s content is in the <code class="prettyprint">context</code> key. This object and its keys depend on the module&quot;s type. These map directly to the content &amp; settings in the Template editor, so we recommend referencing that in case any values are unclear.</p>
<h2 id='view-abandoned-cart-email'>View Abandoned Cart Email</h2>
<p>Returns an Abandoned Cart Email, along with its action timestamps.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/abandoned-carts/emails/57b5aa3b046abfb053d80b52 </span><span class="se">\</span><span class="s2">
  -H "</span>X-ApiKey: YOUR_API_KEY<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>Accept: application/json<span class="s2">"
</span></code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d89b69"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"abandonedCartId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abf1253d89b33"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a@customer.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"deliveredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:15.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clickedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:01:10.000Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-abandoned-cart-email-get'>Show Abandoned Cart Email [GET]</h3>
<p>Three possible endpoints:</p>

<ol>
<li><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/emails/{EMAIL_ID}</code></li>
<li><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/templates/{TEMPLATE_ID}/emails/{EMAIL_ID}</code></li>
<li><code class="prettyprint">https://app.conversio.com/api/v1/abandoned-carts/campaigns/{CAMPAIGN_ID}/templates/{TEMPLATE_ID}/emails/{EMAIL_ID}</code></li>
</ol>

<p><em>OAuth Scopes</em>: read_abandoned_cart_email, write_abandoned_cart_email</p>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Email not found. One of the following happened:
  <ul>
    <li>The given EMAIL_ID does not belong to an existing email</li>
    <li>The given TEMPLATE_ID does not belong to an existing template, if provided</li>
    <li>The given CAMPAIGN_ID does not belong to an existing campaign, if provided</li>
    <li>The requested email belongs to another shop than authenticated</li>
    <li>The requested email belongs to another template than indicated</li>
    <li>The requested email belongs to another campaign than indicated</li>
    <li>The requested email&rsquo;s template belongs to another campaign than indicated</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which contains an object representation of the requested abandoned cart email:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>templateId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this email&rsquo;s template.</td>
</tr>
<tr>
<td style="text-align: right"><strong>abandonedCartId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for the cart that triggered this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to which this email was sent.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email&rsquo;s status. One of &ldquo;created&rdquo;, &ldquo;rendered&rdquo;, &ldquo;rejected&rdquo; or &ldquo;sent&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was sent. <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>deliveredAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was delivered. <strong>ISO 8601</strong> encoded date. Can be missing if not delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>openedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last opened. <strong>ISO 8601</strong> encoded date. Can be missing if never delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>clickedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last clicked. <strong>ISO 8601</strong> encoded date. Can be missing if no link was ever clicked.</td>
</tr>
</tbody></table>

          <h1 id='users'>Users</h1>
<p>Services related to users using the <strong>Users API</strong>.</p>
<h2 id='current-user'>Current user</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/users/current"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='retrieve-user-information-get'>Retrieve user information [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/users/current</code></p>

<p>The current API user.</p>

<p><aside class="success">
Response 200 (application/json)
</aside></p>
<h2 id='uninstall'>Uninstall</h2><pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/users/uninstall"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>
<h3 id='uninstall-the-userapp-post'>Uninstall the user/app [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/users/uninstall</code></p>

<p>Tells Conversio to uninstall the user associated with the given API key. Among
other things, this automatically unsubscribes the user from a premium plan.</p>

<p><aside class="success">
Response 204
</aside></p>

          <h1 id='newsletters'>Newsletters</h1>
<p>Endpoints for getting data on existing Newsletters for a shop, and their emails.</p>
<h2 id='list-newsletters'>List Newsletters</h2>
<p>Returns all the Newsletters created in a shop.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters?limit=2&amp;page=2"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b59"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4th of July Sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"liveAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-03:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"audience"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"lists"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"marketing"</span><span class="p">,</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">],</span><span class="w">
        </span><span class="nt">"customerSegmentKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"customerSegmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b57"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"customerSegmentInline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"criteria"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"customerLists"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"customerSegments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black Friday Announcement"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"liveAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerLists"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"57b5aa3b046abfb053d80b53"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"customerSegments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"57b5aa3b046abfb053d80b57"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:10:15.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prevPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/newsletters?page=1&amp;limit=2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nextPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/newsletters?page=3&amp;limit=2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-newsletters-get'>List all Newsletters [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_template, write_newsletter_template</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>limit:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many Newsletters to return. Default is 10.</td>
</tr>
<tr>
<td style="text-align: right"><strong>page:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Which page of Newsletters to return. Default is 1.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Filters the Newsletters by status. Can be <code class="prettyprint">sent</code>, <code class="prettyprint">scheduled</code>, <code class="prettyprint">live</code> or <code class="prettyprint">draft</code>.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is an Array with <code class="prettyprint">limit</code> newsletters in the shop. The Newsletters are sorted by <code class="prettyprint">sentAt</code> descending, <code class="prettyprint">liveAt</code> ascending and <code class="prettyprint">createdAt</code> descending. It also returns a <code class="prettyprint">meta</code> key with paging info.</p>

<p>Each newsletter object includes the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s ID. Use it when calling single-newsletter endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s title.</td>
</tr>
<tr>
<td style="text-align: right"><strong>audience</strong></td>
<td><strong>object</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s audience. Can be comprised of one or more lists, a segment ID or an inline segment. See <a href="#audience">below</a>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>liveAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the Newsletter is set to go live, if scheduled, or when it was set live, if sent or live. Is an <strong>ISO 8601</strong> encoded date. Is omitted if the Newsletter is a draft.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s current status. Must be one of &ldquo;draft&rdquo;, &ldquo;scheduled&rdquo;, &ldquo;live&rdquo;, or &ldquo;sent&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the Newsletter was fully sent, if such is the case. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerLists (deprecated):</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of IDs of Customer Lists who will receive / have received this Newsletter. May be empty. <strong>Deprecated in favour of <code class="prettyprint">audience</code>.</strong></td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegments (deprecated):</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of IDs of Customer Segments who will receive / have received this Newsletter. May be empty. <strong>Deprecated in favour of <code class="prettyprint">audience</code>.</strong></td>
</tr>
</tbody></table>
<h4 id='audience'>Audience</h4>
<p>The Newsletter&rsquo;s Audience. A Newsletter can be sent to one or more Customer Lists, with an optional segment that limits the Newsletter to a subset of subscribers on those lists.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>lists:</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>List IDs. Can only be empty for &ldquo;draft&rdquo; Newsletters.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegmentKind:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>One of <code class="prettyprint">&quot;inline&quot;</code>, <code class="prettyprint">&quot;id&quot;</code> or <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegmentId:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A Customer Segment&rsquo;s ID. Ignored unless <code class="prettyprint">customerSegmentKind</code> is <code class="prettyprint">&quot;id&quot;</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegmentInline:</strong></td>
<td><strong>object, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An inline Customer Segment. Ignored unless <code class="prettyprint">customerSegmentKind</code> is <code class="prettyprint">&quot;inline&quot;</code>. See <a href="#customer-segments">Customer Segments</a> for structure.</td>
</tr>
</tbody></table>
<h2 id='newsletter-report'>Newsletter Report</h2>
<p>Returns the selected Newsletter and some stats regarding its sending status.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black Friday Announcement"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"liveAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"audience"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"lists"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"everyone"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"customerSegmentKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerSegmentInline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"criteria"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nt">"criteriaName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt.sent"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"negate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"filters"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"customerLists"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"customerSegments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:10:15.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"sends"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="nt">"opens"</span><span class="p">:</span><span class="w"> </span><span class="mi">450</span><span class="p">,</span><span class="w">
      </span><span class="nt">"uniqueOpens"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nt">"clicks"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w">
      </span><span class="nt">"recipientCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">515</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"contentModules"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='single-newsletter-report-get'>Single Newsletter Report [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters/{NEWSLETTER_ID}</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_template, write_newsletter_template</p>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Newsletter not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing newsletter</li>
    <li>The ID belongs to another shop&rsquo;s newsletter</li>
    <li>The newsletter has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that the Newsletter object. The included info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s ID. Use it when calling single-newsletter endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s title.</td>
</tr>
<tr>
<td style="text-align: right"><strong>audience</strong></td>
<td><strong>object</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s audience. Can be comprised of one or more lists, a segment ID or an inline segment. See <a href="#audience">above</a>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>liveAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the Newsletter is set to go live, if scheduled, or when it was set live, if sent or live. Is an <strong>ISO 8601</strong> encoded date. Is omitted if the Newsletter is a draft.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s current status. Must be one of &ldquo;draft&rdquo;, &ldquo;scheduled&rdquo;, &ldquo;live&rdquo;, or &ldquo;sent&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the Newsletter was fully sent, if such is the case. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>stats:</strong></td>
<td><strong>object</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An object with this Newsletter&rsquo;s stats. Included keys are described below.</td>
</tr>
<tr>
<td style="text-align: right"><strong>contentModules:</strong></td>
<td><strong>array</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of the Content Modules in a Newsletter. These represent the content (copy, images, discounts, etc.) in a Newsletter. More details below.</td>
</tr>
<tr>
<td style="text-align: right"><strong>customerLists (deprecated):</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of IDs of Customer Lists who will receive / have received this Newsletter. May be empty. <strong>Deprecated in favour of <code class="prettyprint">audience</code>.</strong></td>
</tr>
<tr>
<td style="text-align: right"><strong>customerSegments (deprecated):</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An array of IDs of Customer Segments who will receive / have received this Newsletter. May be empty. <strong>Deprecated in favour of <code class="prettyprint">audience</code>.</strong></td>
</tr>
</tbody></table>
<h4 id='stats'>Stats</h4>
<p>The <code class="prettyprint">stats</code> key has the following format:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>sends:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The total number of emails that were sent for this Newsletter.</td>
</tr>
<tr>
<td style="text-align: right"><strong>opens:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The total number of times this Newsletter&rsquo;s emails have been opened.</td>
</tr>
<tr>
<td style="text-align: right"><strong>uniqueOpens:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The number of unique users that have opened this Newsletter&rsquo;s emails.</td>
</tr>
<tr>
<td style="text-align: right"><strong>clicks:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The total number of clicks on this Newsletter&rsquo;s links.</td>
</tr>
<tr>
<td style="text-align: right"><strong>recipientCount:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many recipients was this Newsletter sent to. May differ from <code class="prettyprint">sends</code> if there are sending errors.</td>
</tr>
</tbody></table>
<h4 id='content-modules'>Content Modules</h4><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"contentModules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black Friday Sale!"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.epic-store.com/black-friday-img.png"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.epic-store.com/sale"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discountCoupon"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extra Black Friday Discount"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{firstName}}, these are the last few hours of our Black Friday sale! As an extra incentive, this is a coupon for extra {{discount}} off your next purchase :)"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"actionTitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Start Shopping"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expiresOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Expires On"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primaryColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#1990FF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expiryPeriod"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"emailLimit"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"couponType"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"backgroundColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#f8f8f8"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"onePerUser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"usageLimit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each module has a <code class="prettyprint">position</code> and a <code class="prettyprint">type</code>. The 0-based position indicates where in the Newsletter the module appears (starting from top) and the type defines the kind of content.</p>

<p>The module&rsquo;s content is in the <code class="prettyprint">context</code> key. This object and its keys depend on the module&rsquo;s type. These map directly to the content &amp; settings in the Newsletter editor, so we recommend referencing that in case any values are unclear.</p>
<h2 id='list-newsletter-emails'>List Newsletter Emails</h2>
<p>A paginated list of all the emails sent for a Newsletter. Will be empty if Newsletter has not been sent yet. Emails are returned sorted by email address, and pagination is done by providing the email address from which to return results.</p>

<p>Note that if the Newsletter is currently live and sending, paginating results will not guarantee that all emails are returned. Wait for the &ldquo;sent&rdquo; status if an exhaustive list is required.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52/emails?limit=2"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b60"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a@customer.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deliveredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:15.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"clickedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:01:10.000Z"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b60"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another@customer.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deliveredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:17.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-21T10:02:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"nextPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52/emails/?from=another%40email.com&amp;limit=2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='newsletter-email-list-get'>Newsletter Email List [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters/{NEWSLETTER_ID}/emails</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_email, write_newsletter_email</p>
<h3 id='request-query-params'>Request Query Params</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>from:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address from which to start paginating records. Must be URI encoded if present.</td>
</tr>
<tr>
<td style="text-align: right"><strong>limit:</strong></td>
<td><strong>number, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The maximum number of records to return at once. Very high numbers are discouraged and might result in connection timeouts.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Newsletter not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing newsletter</li>
    <li>The ID belongs to another shop&rsquo;s newsletter</li>
    <li>The newsletter has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which contains an array of newsletter emails. The emails&#39; format:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to which this email was sent.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was sent. <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>deliveredAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was delivered. <strong>ISO 8601</strong> encoded date. Can be missing if not delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>openedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last opened. <strong>ISO 8601</strong> encoded date. Can be missing if never delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>clickedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last clicked. <strong>ISO 8601</strong> encoded date. Can be missing if no link was ever clicked.</td>
</tr>
</tbody></table>

<p>The response body also includes a <code class="prettyprint">meta</code> key with further pagination information. The keys included are:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>total:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The total number of emails for this Newsletter.</td>
</tr>
<tr>
<td style="text-align: right"><strong>limit:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The maximum number of records returned in this request.</td>
</tr>
<tr>
<td style="text-align: right"><strong>pages:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many pages need to be requested to go through all emails. Varies with <code class="prettyprint">total</code> and <code class="prettyprint">limit</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>nextPage:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The URL form where the next page of emails can be fetched. Use it to cycle pages. May be omitted if there are no more emails to fetch.</td>
</tr>
</tbody></table>
<h2 id='view-newsletter-email'>View Newsletter Email</h2>
<p>Returns a Newsletter&rsquo;s email, along with its text &amp; HTML contents.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52/emails/57b5aa3b046abfb053d80b68"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a@customer.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"deliveredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T00:00:15.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clickedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-20T01:01:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"rendered"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is an email's text version..."</span><span class="p">,</span><span class="w">
      </span><span class="nt">"html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;html&gt;&lt;body&gt;This is an email's HTML content...&lt;/body&gt;&lt;/html&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"subject:"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is the Newsletter's subject."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-newsletter-email-get'>Show Newsletter Email [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters/{NEWSLETTER_ID}/emails/{EMAIL_ID}</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_email, write_newsletter_email</p>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Email not found. One of the following happened:
  <ul>
    <li>The given NEWSLETTER_ID does not belong to an existing newsletter</li>
    <li>The given EMAIL_ID does not belong to an existing email</li>
    <li>The NEWSLETTER_ID belongs to another shop&rsquo;s newsletter</li>
    <li>The EMAIL_ID belongs to another newsletter than indicated</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which contains an object representation of the requested newsletter email. The <code class="prettyprint">rendered</code> key is included with the email&rsquo;s contents:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to which this email was sent.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was sent. <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>deliveredAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was delivered. <strong>ISO 8601</strong> encoded date. Can be missing if not delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>openedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last opened. <strong>ISO 8601</strong> encoded date. Can be missing if never delivered.</td>
</tr>
<tr>
<td style="text-align: right"><strong>clickedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this email was last clicked. <strong>ISO 8601</strong> encoded date. Can be missing if no link was ever clicked.</td>
</tr>
<tr>
<td style="text-align: right"><strong>rendered:</strong></td>
<td><strong>object</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The rendered content for this email. Contains keys: <code class="prettyprint">text</code>, <code class="prettyprint">html</code> and <code class="prettyprint">subject</code></td>
</tr>
</tbody></table>
<h2 id='export-newsletter-recipients'>Export Newsletter Recipients</h2>
<p>Starts an Async Job to export a Newsletter&rsquo;s recipients. Once completed, the job&rsquo;s result will point to a CSV file with email addresses.</p>

<p>Refer to the <a href="#async-jobs">Async Jobs</a> documentation on how to access the job&rsquo;s result.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52/recipients/async-export"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-recipients"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-export-job-post'>Create Export Job [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters/{NEWSLETTER_ID}/recipients/async-export</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_email, write_newsletter_email</p>

<p><aside class="success">
  Response 201 - Job Created
</aside></p>

<p><aside class="warning">
  Response 404 - Newsletter not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing Newsletter</li>
    <li>The ID belongs to another shop&rsquo;s Newsletter</li>
    <li>The Newsletter has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which reflects the created Async Job&rsquo;s info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for the created AsyncJob. Use this to identify this export.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The kind of job created. Is always <code class="prettyprint">newsletter-recipients</code> on this endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. Always <code class="prettyprint">pending</code>.</td>
</tr>
</tbody></table>
<h2 id='export-newsletter-emails'>Export Newsletter Emails</h2>
<p>Starts an Async Job to export a Newsletter&rsquo;s emails. Once completed, the job&rsquo;s result will point to a CSV file with email addresses and activity timestamps.</p>

<p>Refer to the <a href="#async-jobs">Async Jobs</a> documentation on how to access the job&rsquo;s result.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/newsletters/57b5aa3b046abfb053d80b52/emails/async-export"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-emails"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-export-job-post'>Create Export Job [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/newsletters/{NEWSLETTER_ID}/emails/async-export</code></p>

<p><em>OAuth Scopes</em>: read_newsletter_email, write_newsletter_email</p>

<p><aside class="success">
  Response 201 - Job Created
</aside></p>

<p><aside class="warning">
  Response 404 - Newsletter not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing Newsletter</li>
    <li>The ID belongs to another shop&rsquo;s newsletter</li>
    <li>The Newsletter has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which reflects the created Async Job&rsquo;s info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for the created AsyncJob. Use this to identify this export.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The kind of job created. Is always <code class="prettyprint">newsletter-emails</code> on this endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. Always <code class="prettyprint">pending</code>.</td>
</tr>
</tbody></table>

          <h1 id='customer-lists'>Customer Lists</h1>
<p>Services related to managing <strong>Customer Lists</strong> (for Newsletters) and subscriptions.</p>
<h2 id='get-customer-lists'>Get Customer Lists</h2>
<p>Get all available customer lists.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Weekly Newsletter Subscribers"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"singleOptIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unsubscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b53"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Products Announcements"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"singleOptIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unsubscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"marketing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Accepted Marketing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"singleOptIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pending"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unsubscribers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id='list-all-customer-lists-get'>List all Customer Lists [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists</code></p>
<h3 id='arguments'>Arguments</h3>
<p>These are provided via query params.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>all:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether to include lists that are not subscribable in the return (eg: Accepts Marketing)</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<p>The endpoint returns an array with all the Customer Lists in the account. Object keys are:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Customer List ID. This is used whenever referencing this Customer List in other endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title picked by the user for this List. Used in user-facing interfaces.</td>
</tr>
<tr>
<td style="text-align: right"><strong>singleOptIn:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is single opt-in. If not, a confirmation email is sent on subscription.</td>
</tr>
<tr>
<td style="text-align: right"><strong>enabled:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is enabled. Always <code class="prettyprint">true</code> except for the <code class="prettyprint">marketing</code> list where it may be <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subscribable:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether subscribers can be added to this list.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subscribers:</strong></td>
<td><strong>integer</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The number of subscribers for this list.</td>
</tr>
<tr>
<td style="text-align: right"><strong>pending:</strong></td>
<td><strong>integer</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The number of pending subscribers for this list. A pending subscriber used an online form to sign up, but has not confirmed the subscription yet.</td>
</tr>
<tr>
<td style="text-align: right"><strong>unsubscribers:</strong></td>
<td><strong>integer</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The number of unsubscribers for this list.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200 (application/json)
</aside></p>
<h2 id='create-list'>Create List</h2>
<p>Creates a new Customer List.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
       "title":"An Awesome List",
       "singleOptIn":false
  }'</span>
</code></pre>

<blockquote>
<p>RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An Awesome List"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"singleOptIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-a-customer-list-post'>Create a Customer List [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists</code></p>

<p><em>OAuth Scopes</em>: read_customer_list, write_customer_list</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title for the new List. Used in user-facing interfaces.</td>
</tr>
<tr>
<td style="text-align: right"><strong>singleOptIn:</strong></td>
<td><strong>boolean, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is single opt-in. If not, a confirmation email is sent on subscription.</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key with the created list&rsquo;s data in it:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Customer List ID. This is used whenever referencing this Customer List in other endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title picked by the user for this List. Used in user-facing interfaces.</td>
</tr>
<tr>
<td style="text-align: right"><strong>singleOptIn:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is single opt-in. If not, a confirmation email is sent on subscription.</td>
</tr>
<tr>
<td style="text-align: right"><strong>enabled:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is enabled. Always <code class="prettyprint">true</code> except for the <code class="prettyprint">marketing</code> list where it may be <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subscribable:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether subscribers can be added to this list.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 201 (application/json)
</aside></p>

<p><aside class="warning">
  Response 400 - Invalid arguments
</aside></p>
<h2 id='update-list'>Update List</h2>
<p>Updates an existing Customer List. Updates are applied partially both on PUT and PATCH requests.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
       "singleOptIn":true
  }'</span>
</code></pre>

<blockquote>
<p>RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An Awesome List"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"singleOptIn"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='update-a-customer-list-patchput'>Update a Customer List [PATCH|PUT]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists/{LIST_ID}</code></p>

<p><em>OAuth Scopes</em>: read_customer_list, write_customer_list</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A new title for the List. Used in user-facing interfaces.</td>
</tr>
<tr>
<td style="text-align: right"><strong>singleOptIn:</strong></td>
<td><strong>boolean, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is single opt-in.</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key with the updated list&rsquo;s data in it:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Customer List ID. This is used whenever referencing this Customer List in other endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The title for this List. Used in user-facing interfaces.</td>
</tr>
<tr>
<td style="text-align: right"><strong>singleOptIn:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is single opt-in. If not, a confirmation email is sent on subscription.</td>
</tr>
<tr>
<td style="text-align: right"><strong>enabled:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this list is enabled. Always <code class="prettyprint">true</code> except for the <code class="prettyprint">marketing</code> list where it may be <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subscribable:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether subscribers can be added to this list.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200 (application/json)
</aside></p>

<p><aside class="warning">
  Response 400 - Invalid arguments
</aside></p>

<p><aside class="warning">
  Response 404 - No such list
</aside></p>
<h2 id='subscribe-to-list'>Subscribe to List</h2>
<p>Subscribe an email address and optional user details to a specific customer list.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists/LIST_ID/subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{
    "email": "an@email.com",
    "name": "John Snow",
    "source": "Conversio",
    "sourceType": "SubscriptionForm",
    "sourceId": "some-form-slug",
    "optInText": "Subscribe to receive new product updates"
  }'</span>
</code></pre>
<h3 id='subscribe-an-email-to-a-customer-list-put'>Subscribe an Email to a Customer List [PUT]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists/LIST_ID/subscriptions</code></p>

<p><code class="prettyprint">LIST_ID</code> should be the <code class="prettyprint">id</code> returned in the <a href="#get-customer-lists">list</a> response.</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th style="text-align: right">Argument</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>email:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to subscribe to this Customer List. Must be a valid email address.</td>
</tr>
<tr>
<td style="text-align: right"><strong>name:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address owner&rsquo;s name. Expects first or first and last name.</td>
</tr>
<tr>
<td style="text-align: right"><strong>properties:</strong></td>
<td><strong>object, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Additional properties to track for this subscriber. Type inference applies the first time a property is tracked, We support string, number, boolean, array and date types. In the case of an array the type is infered from the first element in the array</td>
</tr>
<tr>
<td style="text-align: right"><strong>source:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where this subscription came from. Should be an App or company name.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sourceType:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>What type of control did the user interact for subscribing. Could be a form type, page, etc.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sourceId:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A more granular ID of where the user subscribed. Could be the ID/slug of a form or subscription page.</td>
</tr>
<tr>
<td style="text-align: right"><strong>optInText:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>What opt-in text was shown to the subscriber. This is required for GDPR compliance.</td>
</tr>
</tbody></table>
<h4 id='properties'>Properties</h4>
<p>Property keys can have at most 100 characters in length and must match the regex <code class="prettyprint">/^[a-zA-Z0-9-_]+$/</code>. A maximum of 20 different properties are allowed per account.</p>

<p>The first time a property is tracked (uniqueness is ensured by key), Conversio tries to infer its type. The following rules apply:</p>

<ul>
<li>If value is <code class="prettyprint">null</code>, no type is inferenced.</li>
<li>If a value can be cast to a number:

<ul>
<li>If it is a whole number and the key ends with &ldquo;_at&rdquo; or &ldquo;At&rdquo;, <code class="prettyprint">date</code> is inferred.</li>
<li>otherwise, <code class="prettyprint">number</code> is inferred.</li>
</ul></li>
<li>If a value can be parsed as an iso8601 date, <code class="prettyprint">date</code> is inferred.</li>
<li>Otherwise, <code class="prettyprint">string</code> is inferred.</li>
</ul>

<p><aside class="success">
  Response 204
</aside></p>

<p><aside class="warning">
  Response 400 - Invalid email address
</aside></p>
<h2 id='list-subscribers'>List Subscribers</h2>
<p>Returns a list&rsquo;s accepted subscribers, pending subscribers (haven&rsquo;t opted in yet) and unsubscribers.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists/marketing/subscribers"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@email.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"searchAfter"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"test@email.com"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"nextPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/api/v1/customer-lists/5b10ded082d2653410054ac3/subscribers?limit=10&amp;searchAfter=test%40email.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-subscribers-to-a-customer-list-get'>List all Subscribers to a Customer List [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists/{LIST_ID}/subscribers</code></p>

<p><em>OAuth Scopes</em>: read_customers</p>
<h3 id='arguments'>Arguments</h3>
<p>These are provided via query params.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>pending:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Changes the return to a list of pending subscribers.</td>
</tr>
<tr>
<td style="text-align: right"><strong>unsubscribers:</strong></td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Changes the return to a list of unsubscribers.</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key with the found subscribers, and a <code class="prettyprint">meta</code> key with pagination info. By default, the returned subscribers are Customer objects with event &amp; stats data.</p>

<p><strong>However</strong>, when querying for <code class="prettyprint">pending</code> or <code class="prettyprint">unsubscribers</code> the returned subscribers include only the <code class="prettyprint">email</code> key. Pagination is also different. This is for legacy reasons and is likely to change (to match the default return) in the future.</p>

<p>To ensure your app supports all returns and is future-proof, expect only the <code class="prettyprint">email</code> address in the return, and use <code class="prettyprint">nextPage</code> for pagination.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>email:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address for the subscriber. Only common field across all queries.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>
<h2 id='mass-unsubscribe'>Mass Unsubscribe</h2>
<p>Removes one or more list&rsquo;s subscribers. There are two versions of this request: one that removes a list of emails, another that removes a whole segment.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists/LIST_ID/subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -G <span class="se">\</span>
  -d <span class="s1">'{
    "emails": ["an@email.com", "another@email.com"]
  }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"unsubscribed"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"failed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"failedReasons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='unsubscribe-via-email-list-delete'>Unsubscribe via Email List [DELETE]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists/{LIST_ID}/subscribers</code></p>

<p><em>OAuth Scopes</em>: write_customers</p>
<h3 id='arguments'>Arguments</h3>
<p>These are provided via query params.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>emails:</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The list of emails to unsubscribe from the Customer List.</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>unsubscribed:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many emails were successfuly unsubscribed.</td>
</tr>
<tr>
<td style="text-align: right"><strong>failed:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>How many emails failed to unsubscribe.</td>
</tr>
<tr>
<td style="text-align: right"><strong>failedReasons:</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A list of errors that explain unsubscribe failures.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 400 - No emails provided, or is not an array
</aside></p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/customer-lists/LIST_ID/subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -G <span class="se">\</span>
  -d <span class="s1">'{
    "segment": "{\"criteria\":[{\"criteriaName\":\"receipt.sent\",\"negate\":true,\"filters\":[]}]}"
  }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"asyncJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b10ded082d2653410054ac3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='unsubscribe-via-customer-segment-delete'>Unsubscribe via Customer Segment [DELETE]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/customer-lists/{LIST_ID}/subscribers</code></p>

<p><em>OAuth Scopes</em>: write_customers</p>
<h3 id='arguments'>Arguments</h3>
<p>These are provided via query params.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>segment:</strong></td>
<td><strong>string[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>A Customer Segment in JSON format.</td>
</tr>
</tbody></table>
<h3 id='return'>Return</h3>
<p>There are two possible return formats: If the number of subscribers to remove is relatively low, they will be removed synchronously with the request and the return will mirror the <a href="#unsubscribe-via-email-list-delete">Unsubscribe via Email List&rsquo;s</a>. Otherwise, an <a href="#async-jobs">Async Job</a> is started and it&rsquo;s ID returned instead inside the <code class="prettyprint">data</code> key.</p>

<p>The following format is returned only with status 202:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>asyncJobId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An Async Job&rsquo;s ID.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200 - Subscribers removed synchronously
</aside></p>

<p><aside class="success">
  Response 202 - An async job was created to complete the mass unsubscribe
</aside></p>

<p><aside class="warning">
  Response 400 - No segment provided
</aside></p>

          <h1 id='customer-segments'>Customer Segments</h1>
<p>Services related to managing <strong>Customer Segments</strong>.</p>
<h2 id='list-customer-segments'>List Customer Segments</h2>
<p>Returns all segments and where they&rsquo;re used.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/segments"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ae9aeedc60b7e00fe9f133a"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"At Risk\" Repeat Customers"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"editable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"uses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ae9aeedc60b7e00fe9f1330"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First-time Buyers"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"editable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"uses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"modelName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ReceiptTemplate"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ae9aeedc60b7e00fe9f1356"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-customer-segments-get'>List all Customer Segments [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/segments</code></p>

<p><em>OAuth Scopes</em>: read_segments</p>
<h3 id='return'>Return</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key that contains all the Customer Segments in the account. Object keys are:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Customer Segment&rsquo;s ID. This is used whenever referencing this Customer Segment in other endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>name:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The segment&rsquo; name.</td>
</tr>
<tr>
<td style="text-align: right"><strong>editable:</strong></td>
<td><strong>bool</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Whether this is a default segment (<code class="prettyprint">false</code>) or a custom one (<code class="prettyprint">true</code>)</td>
</tr>
<tr>
<td style="text-align: right"><strong>uses:</strong></td>
<td><strong>object[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where this segment is currently being used, see below.</td>
</tr>
</tbody></table>
<h4 id='uses'>Uses</h4>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>modelName:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Name of the Model where a segment is used, Possible values: <code class="prettyprint">&quot;AsyncJob&quot;</code>, <code class="prettyprint">&quot;Campaign&quot;</code>, <code class="prettyprint">&quot;FollowUpTemplate&quot;</code>, <code class="prettyprint">&quot;NewsletterTemplate&quot;</code>, <code class="prettyprint">&quot;ReceiptTemplate&quot;</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>models:</strong></td>
<td><strong>object[]</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>All the objects of <code class="prettyprint">modelName</code> type where this segment is used. Format depends on model.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200
</aside></p>
<h2 id='export-segment-customers'>Export Segment Customers</h2>
<p>Starts an Async Job to export a Segment&rsquo;s customers. Once completed, the job&rsquo;s result will point ot a CSV file with email addresses and subscription status.</p>

<p>Refer to the <a href="#async-jobs">Async Jobs</a> documentation on how to access the job&rsquo;s result.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/segments/57b5aa3b046abfb053d80b52/async-export"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"segments-export"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-export-job-post'>Create Export Job [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/segments/{SEGMENT_ID}/async-export</code></p>

<p><em>OAuth Scopes</em>: read_customers, read_segments</p>

<p><aside class="success">
  Response 201 - Job Created
</aside></p>

<p><aside class="warning">
  Response 404 - Customer Segment not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing Customer Segment</li>
    <li>The ID belongs to another shop&rsquo;s Customer Segment</li>
    <li>The Customer Segment has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The response body includes a <code class="prettyprint">data</code> key which reflects the created Async Job&rsquo;s info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID for the created AsyncJob. Use this to identify this export.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The kind of job created. Is always <code class="prettyprint">segments-export</code> on this endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. Always <code class="prettyprint">pending</code>.</td>
</tr>
</tbody></table>

          <h1 id='webhooks'>Webhooks</h1>
<p>Endpoints for subscribing and configuring Webhooks triggered by events on your account.</p>

<p>You should use webhooks to get near real-time updates on events in a shop. When one of the supported events happens (eg: a newsletter email is sent), Conversio will <code class="prettyprint">POST</code> some data related to that event to the endpoints registered in webhooks that subscribed to that event&rsquo;s topic.</p>

<p>When Webhook delivery fails (your endpoint can&rsquo;t be reached or returns an error status code), we&rsquo;ll keep trying to re-send the failed Webhooks up to a limited number of tries, in an exponential back-off fashion. Details are described <a href="#retry-mechanism">below</a>.</p>

<p>For security purposes, all our webhooks use JSON Web Signatures (<a href="https://tools.ietf.org/html/rfc7515">JWS</a>). These allow recipients to validate that each webhook originates from Conversio. More details on the validation are <a href="#security-signature">below</a>.</p>
<h3 id='subscribable-topics'>Subscribable Topics</h3>
<ul>
<li><code class="prettyprint">newsletter-template/sent</code>: Triggered when all emails for a Newsletter have been sent.</li>
<li><code class="prettyprint">newsletter-email/sent</code>: Triggered when a Newsletter is sent to a customer. These typically arrive in bursts as the Newsletter Template is sending;</li>
<li><code class="prettyprint">async-job/completed</code>: Triggered when an Async Job has been completed (failed or succeeded).</li>
<li><code class="prettyprint">abandoned-cart-email/sent</code>: Triggered when an email was sent for an Abandoned Cart.</li>
</ul>
<h3 id='payload'>Payload</h3>
<p>All request bodies contain two keys, <code class="prettyprint">meta</code> and <code class="prettyprint">data</code>. The <code class="prettyprint">meta</code> key contains information about the webhook itself:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Webhook&rsquo;s topic. Useful if you wish to direct all webhooks to the same endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>ts:</strong></td>
<td><strong>number</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The timestamp for when the webhook was <strong>first sent</strong>. This will stay equal for subsequent retries.</td>
</tr>
</tbody></table>

<p>The <code class="prettyprint">data</code> key&rsquo;s content depends on the Webhook&rsquo;s topic. The following apply:</p>
<h4 id='code-classprettyprintnewsletter-templatesentcode'><code class="prettyprint">newsletter-template/sent</code></h4><pre class="highlight shell"><code><span class="c"># EXAMPLE WEBHOOK</span>
<span class="gp">$ </span>curl <span class="s2">"https://partner-app.com/registered/endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 'eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "meta": {
      "topic": "newsletter-template/sent",
      "ts": 1485431966802
    },
    "data": {
      "templateId": "57b5aa3b640abfb053d80a63",
      "userId": "67b5aa3c640abfb053d80a63",
      "status": "sent",
      "title": "Black Friday opening announcement",
      "sentAt": "2017-01-26T11:57:26.675Z",
      "liveAt": "2017-01-26T11:45:28.888Z"
    }
  }'</span>
</code></pre>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>templateId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter Template&rsquo;s ID. Can be used to reference the template using the API.</td>
</tr>
<tr>
<td style="text-align: right"><strong>userId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The User / Store that this template belongs to.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Template status, is &ldquo;sent&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s title (store-facing, not necessarily in email content).</td>
</tr>
<tr>
<td style="text-align: right"><strong>liveAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the template started sending. This is an <strong>ISO 8601</strong> formatted date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the template finished sending. This is an <strong>ISO 8601</strong> formatted date.</td>
</tr>
</tbody></table>
<h4 id='code-classprettyprintnewsletter-emailsentcode'><code class="prettyprint">newsletter-email/sent</code></h4><pre class="highlight shell"><code><span class="c"># EXAMPLE WEBHOOK</span>
<span class="gp">$ </span>curl <span class="s2">"https://partner-app.com/registered/endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 'eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "meta": {
      "topic": "newsletter-email/sent",
      "ts": 1485431966802
    },
    "data": {
      "emailId": "57b5aa3b046abfb053d80b52",
      "templateId": "57b5aa3b640abfb053d80a63",
      "userId": "67b5aa3c640abfb053d80a63",
      "to": "an@email.com",
      "subject": "Black Friday Sale",
      "title": "Black Friday opening announcement",
      "sentAt": "2017-01-26T11:57:26.675Z"
    }
  }'</span>
</code></pre>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>emailId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter Email&rsquo;s ID. Can be used to reference the email using the API.</td>
</tr>
<tr>
<td style="text-align: right"><strong>templateId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter Template&rsquo;s ID. The template that the email belongs to.</td>
</tr>
<tr>
<td style="text-align: right"><strong>userId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The User / Store that this email belongs to.</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address to whom this email was sent.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subject:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The subject of the email</td>
</tr>
<tr>
<td style="text-align: right"><strong>title:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Newsletter&rsquo;s title (store-facing, not necessarily in email content).</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the email was sent. This is an <strong>ISO 8601</strong> formatted date.</td>
</tr>
</tbody></table>
<h4 id='code-classprettyprintasync-jobcompletedcode'><code class="prettyprint">async-job/completed</code></h4><pre class="highlight shell"><code><span class="c"># EXAMPLE WEBHOOK</span>
<span class="gp">$ </span>curl <span class="s2">"https://partner-app.com/registered/endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 'eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "meta": {
      "topic": "async-job/completed",
      "ts": 1485431966803
    },
    "data": {
      "asyncJobId": "57b5aa3b046abfb053d80b52",
      "userId": "57b5aa3b046abbf053d80b64"
      "kind": "newsletter-recipients",
      "status": "done",
      "startedAt": "2017-01-26T11:57:26.675Z",
      "completedAt": "2017-01-26T12:02:06.665Z",
      "result": "https://receiptful.s3.amazonaws.com/async-jobs/1234567890987654321.csv"
    }
  }'</span>
</code></pre>

<p>Data is the JSON representation of the completed Async Job:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>asyncJobId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Async Job&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>userId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The user on whose behalf this job is running.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>What kind of job it is.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. Is either &ldquo;done&rdquo; or &ldquo;failed&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>startedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job started processing. Is an <strong>ISO 8601</strong> encoded date. Can be null if it hasn&rsquo;t started yet.</td>
</tr>
<tr>
<td style="text-align: right"><strong>completedAt:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job completed. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>error:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An error message that indicates a problem when processing the job. There is no <code class="prettyprint">result</code> if this is present.</td>
</tr>
<tr>
<td style="text-align: right"><strong>result:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The final result from processing this job. What it is depends on job <code class="prettyprint">kind</code>.</td>
</tr>
</tbody></table>
<h4 id='code-classprettyprintabandoned-cart-emailsentcode'><code class="prettyprint">abandoned-cart-email/sent</code></h4><pre class="highlight shell"><code><span class="c"># EXAMPLE WEBHOOK</span>
<span class="gp">$ </span>curl <span class="s2">"https://partner-app.com/registered/endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 'eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "meta": {
      "topic": "abandoned-cart-email/sent",
      "ts": 1485431966893
    },
    "data": {
      "userId": "57b5aa3b0461234053d80b52"
      "emailId": "57b5aa3b046abfb053d80b52",
      "templateId": "57b5aa3b046abfb053d80b53",
      "campaignId": "57b5aa3b046abfb053d80b56",
      "abandonedCartId": "57b5aa3b046abfb053d80b59",
      "to": "some@customer.com",
      "status": "sent"
      "sentAt": "2017-01-26T11:57:26.675Z",
      "subject": "You forgot your goodies!"
    }
  }'</span>
</code></pre>

<p>Data is the JSON representation of the sent Abandoned Cart email:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>emailId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>templateId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email template&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>campaignId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Abandoned Cart Campaign&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>abandonedCartId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Abandoned Cart that triggered this email.</td>
</tr>
<tr>
<td style="text-align: right"><strong>userId:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The User&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>to:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email address of the customer that received this email (also the owner of the Abandoned Cart).</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email&rsquo;s status. Is &ldquo;sent&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>sentAt:</strong></td>
<td><strong>stringl</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When the email was sent. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>subject:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The email subject.</td>
</tr>
</tbody></table>
<h3 id='retry-mechanism'>Retry Mechanism</h3>
<p>Webhooks retry up to 6 times, for a total of 7 attempts. Multiple failures are grouped by endpoint and retried in batches. If 5% or more of a batch of retries fails consecutively, all webhooks in that batch are skipped and an attempt is counted for each.</p>

<p>The retry progression is (in time elapsed from first attempt):</p>

<ol>
<li>10min</li>
<li>35min</li>
<li>1h 30min</li>
<li>4h 20min</li>
<li>10h 30min</li>
<li>1d 3h</li>
<li>3d</li>
</ol>

<p>After all attempts are through, the webhooks are discarded.</p>
<h3 id='security-signature'>Security Signature</h3><pre class="highlight shell"><code><span class="c"># EXAMPLE WEBHOOK</span>
<span class="gp">$ </span>curl <span class="s2">"https://partner-app.com/registered/endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 'eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{ ... }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="cm">/* JavaScript */</span>
<span class="kr">const</span> <span class="nx">jws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jws'</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">authorization</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Authorization'</span><span class="p">);</span>
<span class="c1">// &gt; 'Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6IkNsaWVudCBTZWNyZXQiLCJ0eXAiOiJKV1QifQ.eyJqaXQiOiIzOTg1Y2JlMC1lM2JlLTExZTYtYThmMy04NTMzOTYyOGMzNGEiLCJpYXQiOjE0ODU0MzE2ODIsImlzcyI6IkNvbnZlcnNpbyJ9.WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'</span>

<span class="kr">const</span> <span class="p">[,</span> <span class="nx">encodedToken</span><span class="p">]</span> <span class="o">=</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">jws</span><span class="p">.</span><span class="nx">decode</span><span class="p">(</span><span class="nx">encodedToken</span><span class="p">);</span>
<span class="c1">// &gt; {</span>
<span class="c1">// &gt;   header: { alg: 'HS256', kid: 'Client Secret', typ: 'JWT' },</span>
<span class="c1">// &gt;   payload: {</span>
<span class="c1">// &gt;     jit: '3985cbe0-e3be-11e6-a8f3-85339628c34a',</span>
<span class="c1">// &gt;     iat: 1485431682,</span>
<span class="c1">// &gt;     iss: 'Conversio'</span>
<span class="c1">// &gt;   },</span>
<span class="c1">// &gt;   signature: 'WZYh7Wylj5vnGRWqrgeMXdeRjIqJc9V30nyEG7QHpvk'</span>
<span class="c1">// &gt; }</span>

<span class="nx">jws</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">encodedToken</span><span class="p">,</span> <span class="nx">token</span><span class="p">.</span><span class="nx">header</span><span class="p">.</span><span class="nx">alg</span><span class="p">,</span> <span class="s1">'a-secret'</span><span class="p">);</span>
<span class="c1">// &gt; true</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1">## Ruby</span>
<span class="nb">require</span> <span class="s1">'JWT'</span>

<span class="n">_</span><span class="p">,</span> <span class="n">encoded_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">].</span><span class="nf">split</span>
<span class="n">payload</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="n">encoded_token</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">false</span><span class="p">)</span>
<span class="c1"># &gt; payload = {"jit"=&gt;"3985cbe0-e3be-11e6-a8f3-85339628c34a", "iat"=&gt;1485431682, "iss"=&gt;"Conversio"}</span>
<span class="c1"># &gt; header = {"alg"=&gt;"HS256", "kid"=&gt;"Client Secret", "typ"=&gt;"JWT"}</span>

<span class="no">JWT</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="n">encoded_token</span><span class="p">,</span> <span class="s1">'a-secret'</span><span class="p">,</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">algorithm: </span><span class="n">header</span><span class="p">[</span><span class="s1">'alg'</span><span class="p">],</span> <span class="ss">iss: </span><span class="s1">'Conversio'</span><span class="p">,</span> <span class="ss">verify_iss: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">verify_iat: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># &gt; [{"jit"=&gt;"3985cbe0-e3be-11e6-a8f3-85339628c34a", "iat"=&gt;1485431682, "iss"=&gt;"Conversio"}, {"alg"=&gt;"HS256", "kid"=&gt;"Client Secret", "typ"=&gt;"JWT"}]</span>
</code></pre>

<p>A JSON Web Token (<a href="https://tools.ietf.org/html/rfc7519">JWT</a>) is signed and encoded into the Authorization header of the Webhook&rsquo;s request using the Bearer schema. The token&rsquo;s header includes the following keys:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>alg:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Has the value &ldquo;HS256&rdquo;. It&rsquo;s the algorightm used for the HMAC signature.</td>
</tr>
<tr>
<td style="text-align: right"><strong>typ:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Has the value &ldquo;JWT&rdquo;. Indicates this is a JSON Web Token.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kid:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Hints at what secret was used for signing the Token. Is &ldquo;Client Secret&rdquo; when the webhook is registered for a Partner App, or &ldquo;API Key&rdquo; when the webhook was registered through an API.</td>
</tr>
</tbody></table>

<p>The token&rsquo;s body itself includes the following keys:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>jti:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Has a random, unique value. Two tokens with the same <code class="prettyprint">jti</code> could mean an attacker is re-using tokens to fabricate authorized webhooks.</td>
</tr>
<tr>
<td style="text-align: right"><strong>iss:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Has the value &ldquo;Conversio&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>iat:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>UNIX time of when the token was generated (when webhook request is sent).</td>
</tr>
</tbody></table>

<p>This token is then serialized using <a href="https://tools.ietf.org/html/rfc7515#page-19">JWS Compact Serialization</a> and included in the Authorization header using the Bearer schema.</p>

<p>Webhooks recipients should validate that every request is properly signed. This acts as guarantee that the webhook is valid and was sent by Conversio.</p>

<p>Validating the signatures is a process made simple by programming libraries. The same library used during <a href="#authorizing-requests">OAuth</a> can be used here, just follow the examples on the right.</p>
<h2 id='view-webhooks'>View Webhooks</h2>
<p>Returns all Webhooks registered for the current shop. If authorized through OAuth, only those webhooks created by the authorized PartnerApp will be listed.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/webhooks"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-email/sent"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.endpoint.com/conversio-webhook"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-webhooks-get'>List all Webhooks [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/webhooks</code></p>

<p><em>OAuth Scopes</em>: read_webhook, write_webhook</p>

<p><aside class="success">
  Response 200 (application/json)
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is an Array with all the webhooks in the shop. It will limit output to the currently authenticated Partner App webhooks if authorized through OAuth.</p>

<p>Each webhook includes the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Webhook ID. Use it when calling single-webhook endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The event that triggers this webhook.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where the webhook&rsquo;s payload is sent, when triggered. Must be a URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this webhook. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/webhooks/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-email/sent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.endpoint.com/conversio-webhook"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-single-webhook-get'>Show Single Webhook [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/webhooks/{WEBHOOK_ID}</code></p>

<p><em>OAuth Scopes</em>: read_webhook, write_webhook</p>

<p><aside class="success">
  Response 200 - All good
</aside></p>

<p><aside class="warning">
  Response 404 - Webhook not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing webhook</li>
    <li>The ID belongs to another shop&rsquo;s webhook</li>
    <li>The ID belongs to another Partner App&rsquo;s webhook</li>
    <li>The webhook has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Then endpoint returns an object with a <code class="prettyprint">data</code> key that is itself an object with the Webhook&rsquo;s properties. It will include the Partner App if authorized with an API key. The following keys are returned:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Webhook ID. You used it to call this endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The event that triggers this webhook.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where the webhook&rsquo;s payload is sent, when triggered. Must be a URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this webhook. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>
<h2 id='create-webhooks'>Create Webhooks</h2>
<p>Create a new Webhook for the currently authenticated shop. If authorized through OAuth, the Webhook will be assigned to the authorized Partner App.</p>

<p>Only one Webhook for a unique topic &amp; endpoint combination can exist for each Shop. Thus, trying to create multiple webhooks for the same topic and endpoint will result in errors.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/webhooks"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
        "endpoint": "https://www.your-endpoint.com/webhooks",
        "topic": "newsletter-email/sent",
      }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-email/sent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.your-endpoint.com/webhooks"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>EXAMPLE ERROR RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"The chosen topic is invalid"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='create-webhook-post'>Create Webhook [POST]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/webhooks</code></p>

<p><em>OAuth Scopes</em>: write_webhook</p>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The topic to subscribe with this Webhook.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>URL where to publish this Webhook&rsquo;s payload, when triggered.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 201 - Webhook Created
</aside></p>

<p><aside class="warning">
  Response 400 - The Webhook data provided is invalid. The particular error will be returned in the response body, but these could be the most common:
  <ul>
    <li>A Webhook for that particular endpoint and topic combination already exists.</li>
    <li>The selected topic isn&rsquo;t supported.</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>When successful, the endpoint returns the newly created webhook. The returned data mimics that of the <code class="prettyprint">show</code> endpoint:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The new Webhook&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The event that triggers this webhook.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where the webhook&rsquo;s payload is sent, when triggered. Must be a URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this webhook. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>

<p>Any errors during creation will be identified by a 400 status code and a JSON object with an <code class="prettyprint">errors</code> Array with string explanations of what went wrong.</p>
<h2 id='update-webhooks'>Update Webhooks</h2>
<p>Update an existing webhook with new data. Can change either the topic or endpoint of an existing webhook.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/webhooks/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
        "endpoint": "https://www.your-other-endpoint.com/webhooks"
      }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-email/sent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.your-endpoint.com/webhooks"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>EXAMPLE ERROR RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"The chosen topic is invalid"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='update-webhook-patchput'>Update Webhook [PATCH/PUT]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/webhooks/{WEBHOOK_ID}</code></p>

<p><em>OAuth Scopes</em>: write_webhook</p>

<p>If your client doesn&rsquo;t support the <code class="prettyprint">PATCH</code> method, <code class="prettyprint">PUT</code> can be used to the same effect.</p>

<p><aside class="notice">
  This endpoint performs a partial update. This means omitting a key from the request body will rresult in that value not being changed. Values can be unset with <code class="prettyprint">null</code>.
</aside></p>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The topic to subscribe with this Webhook. Can&rsquo;t be <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>URL where to publish this Webhook&rsquo;s payload, when triggered. Can&rsquo;t be <code class="prettyprint">null</code>.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200 - Webhook Updated
</aside></p>

<p><aside class="warning">
  Response 400 - The Webhook data provided is invalid. The particular error will be returned in the response body, but these could be the most common:
  <ul>
    <li>A Webhook (other than this one) for that particular endpoint and topic combination already exists.</li>
    <li>The selected topic isn&rsquo;t supported.</li>
  </ul>
</aside></p>

<p><aside class="warning">
  Response 404 - Webhook not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing webhook</li>
    <li>The ID belongs to another shop&rsquo;s webhook</li>
    <li>The ID belongs to another Partner App&rsquo;s webhook</li>
    <li>The webhook has been deleted</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>When successful, the endpoint returns the newly created webhook. The returned data mimics that of the <code class="prettyprint">show</code> endpoint:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The updated Webhook&rsquo;s ID.</td>
</tr>
<tr>
<td style="text-align: right"><strong>topic:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The event that triggers this webhook.</td>
</tr>
<tr>
<td style="text-align: right"><strong>endpoint:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>Where the webhook&rsquo;s payload is sent, when triggered. Must be a URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this webhook. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>

<p>Any errors during creation will be identified by a 400 status code and a JSON object with an <code class="prettyprint">errors</code> Array with string explanations of what went wrong.</p>
<h2 id='delete-webhook'>Delete Webhook</h2>
<p>Delete an existing Webhook to stop receiving data at the endpoint.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/webhooks/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X DELETE
</code></pre>
<h3 id='delete-webhook-delete'>Delete Webhook [DELETE]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/webhooks/{WEBHOOK_ID}</code></p>

<p><em>OAuth Scopes</em>: write_webhook</p>

<p><aside class="success">
  Response 204 - Webhook destroyed
</aside></p>

<p><aside class="warning">
  Response 404 - Webhook not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing webhook</li>
    <li>The ID belongs to another shop&rsquo;s webhook</li>
    <li>The ID belongs to another Partner App&rsquo;s webhook</li>
    <li>The webhook has been deleted</li>
  </ul>
</aside></p>

<p>Successful requests return nothing.</p>

          <h1 id='async-jobs'>Async Jobs</h1>
<p>An Async Job is created on certain API endpoints and user actions that we expect will take a long time to complete. Generally, when a job is created, you&rsquo;ll receive a Job ID that you can poll using this API to:</p>

<ol>
<li>Check if the job&rsquo;s completed;</li>
<li>Get the job&rsquo;s result; and</li>
<li>Check the job for errors.</li>
</ol>

<p>Due to the presumably large size of an Async Job&rsquo;s results and how they&rsquo;ll be less relevant as time advances, Async jobs expire 1 week after they&rsquo;ve finished processing, being automatically removed.</p>
<h2 id='list-async-jobs'>List Async Jobs</h2>
<p>Returns all the Async Jobs created for the authenticated shop. When using OAuth, only jobs started by the authenticated app are returned.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/async-jobs"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-recipients"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-03T16:32:27.741Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"completedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-03T16:37:20.417Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/async-jobs/57b5aa3b046abfb053d80b52.csv"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b54"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-recipients"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b57"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-recipients"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-02T05:33:22.123Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"completedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-02T05:33:45.412Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Something terrible has happened. Get in touch with support tout de suite!"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='list-all-jobs-get'>List all Jobs [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/async-jobs</code></p>

<p><em>OAuth Scopes</em>: read_async_job</p>

<p><aside class="success">
  Response 200 (application/json)
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key that is an Array with all the Async Jobs in the shop. It will limit output to the currently authenticated Partner App webhooks if authorized through OAuth.</p>

<p>Each Async Job includes the following info:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Async Job ID. Use it when calling single-job endpoints.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>What kind of job this is. Currently only supports &ldquo;newsletters-recipients&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. One of &ldquo;pending&rdquo;, &ldquo;done&rdquo; or &ldquo;failed&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>startedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job started processing. Is an <strong>ISO 8601</strong> encoded date. Is <code class="prettyprint">null</code> if it hasn&rsquo;t started yet.</td>
</tr>
<tr>
<td style="text-align: right"><strong>completedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job completed. Is <code class="prettyprint">null</code> if it hasn&rsquo;t finished yet. There&rsquo;s a <code class="prettyprint">result</code> or <code class="prettyprint">error</code> if set. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>error:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An error message that indicates a problem when processing the job. There is no <code class="prettyprint">result</code> if this is present.</td>
</tr>
<tr>
<td style="text-align: right"><strong>result:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The final result from processing this job. Contents depend on job <code class="prettyprint">kind</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this Async Job. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>
<h2 id='get-async-job'>Get Async Job</h2>
<p>Returns the requested Async Job. When using OAuth, only jobs started by the authenticated app can be accessed.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl <span class="s2">"https://app.conversio.com/api/v1/async-jobs/57b5aa3b046abfb053d80b52"</span> <span class="se">\</span>
  -H <span class="s2">"X-ApiKey: YOUR_API_KEY"</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter-recipients"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-03T16:32:27.741Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"completedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-03T16:37:20.417Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.conversio.com/async-jobs/57b5aa3b046abfb053d80b52.csv"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='get-an-async-job-get'>Get an Async Job [GET]</h3>
<p><code class="prettyprint">https://app.conversio.com/api/v1/async-jobs/{ASYNC_JOB_ID}</code></p>

<p><em>OAuth Scopes</em>: read_async_job</p>

<p><aside class="success">
  Response 200
</aside></p>

<p><aside class="warning">
  Response 404 - Async Job not found. One of the following happened:
  <ul>
    <li>The given ID does not belong to an existing job</li>
    <li>The ID belongs to another shop&rsquo;s job</li>
    <li>The ID belongs to another Partner App&rsquo;s job</li>
    <li>The job has expired</li>
  </ul>
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>The endpoint returns an object with a <code class="prettyprint">data</code> key. The <code class="prettyprint">data</code> key is an object with the Async Job&rsquo;s properties. It will include the Partner App if authorized with an API key. The following keys are returned:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Async Job&rsquo;s ID. The ID used to call this endpoint.</td>
</tr>
<tr>
<td style="text-align: right"><strong>kind:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>What kind of job this is. Currently only supports &ldquo;newsletters-recipients&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>status:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The job&rsquo;s status. One of &ldquo;pending&rdquo;, &ldquo;done&rdquo; or &ldquo;failed&rdquo;.</td>
</tr>
<tr>
<td style="text-align: right"><strong>startedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job started processing. Is an <strong>ISO 8601</strong> encoded date. Is <code class="prettyprint">null</code> if it hasn&rsquo;t started yet.</td>
</tr>
<tr>
<td style="text-align: right"><strong>completedAt:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>When this job completed. Is <code class="prettyprint">null</code> if it hasn&rsquo;t finished yet. There&rsquo;s a <code class="prettyprint">result</code> or <code class="prettyprint">error</code> if set. Is an <strong>ISO 8601</strong> encoded date.</td>
</tr>
<tr>
<td style="text-align: right"><strong>error:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>An error message that indicates a problem when processing the job. There is no <code class="prettyprint">result</code> if this is present.</td>
</tr>
<tr>
<td style="text-align: right"><strong>result:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The final result from processing this job. Contents depend on job <code class="prettyprint">kind</code>.</td>
</tr>
<tr>
<td style="text-align: right"><strong>partnerApp:</strong></td>
<td><strong>string, optional</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The ID of the Partner App that created this Async Job. Included only when authorization is made with the API key.</td>
</tr>
</tbody></table>

          <h1 id='partner-apps-api'>Partner Apps API</h1>
<p>This API comprises of management endpoints for Partner Apps. Because they&rsquo;re unrelated to any Store, authentication is done through <a href="#hmac">HMAC</a>.</p>
<h2 id='get-partner-app'>Get Partner App</h2>
<p>Returns the saved info for the authenticated Partner App.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl https://app.conversio.com/api/v1/partners/ <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI1N2I1YWEzYjA0NmFiZmIwNTNkODBiNTIifQ.sxd8uG4EkeIXHsIIVELrfGTIZcaTFE9a9YY-8HGHuOQ
</span></code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57b5aa3b046abfb053d80b52"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Epic Forms"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello@epicforms.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"website"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://epicforms.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"epicforms-logo.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redirectUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://epicforms.com/oauth/auth"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='show-current-partner-app-get'>Show Current Partner App [GET]</h3>
<p><aside class="success">
  Response 200
</aside></p>
<h3 id='response-body'>Response Body</h3>
<p>Returns JSON with a <code class="prettyprint">data</code> key which contains the info for the authenticated Partner App:</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>id:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s ID. This is also the <code class="prettyprint">client_id</code> used in OAuth.</td>
</tr>
<tr>
<td style="text-align: right"><strong>name:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The name of this Partner App.</td>
</tr>
<tr>
<td style="text-align: right"><strong>email:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The contact email for this Partner App.</td>
</tr>
<tr>
<td style="text-align: right"><strong>website:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s homepage.</td>
</tr>
<tr>
<td style="text-align: right"><strong>logo:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s logo, used in the OAuth authorize page. Can be a URL or a data URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>redirectUri:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The redirect URI used during OAuth. This value <strong>must match</strong> the argument received in the authorize call.</td>
</tr>
</tbody></table>
<h2 id='update-partner-app'>Update Partner App</h2>
<p>Updates the saved info for the authenticated Partner App. Use this to update a logo or an OAuth redirect URI.</p>
<pre class="highlight shell"><code><span class="c"># EXAMPLE REQUEST</span>
<span class="gp">$ </span>curl https://app.conversio.com/api/v1/partners/ <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI1N2I1YWEzYjA0NmFiZmIwNTNkODBiNTIifQ.sxd8uG4EkeIXHsIIVELrfGTIZcaTFE9a9YY-8HGHuOQ"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
        "name": "A Great Name 2",
        "email": "another_contact@partner.com",
        "website": "www.rebranded.com",
        "logo": "data:image/png;base64,iVBORw0...ggg==",
        "redirectUri": "https://www.rebranded.com/oauth/auth"
      }'</span>
</code></pre>

<blockquote>
<p>EXAMPLE RESPONSE</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A Great Name 2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_contact@partner.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"website"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.rebranded.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redirectUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.rebranded.com/oauth/auth"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id='update-partner-app-patch'>Update Partner App [PATCH]</h3>
<p>Only the attributes that are present in the body will be updated. The logo must be a base64 encoded data URI.</p>
<h3 id='updateable-attributes'>Updateable Attributes</h3>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><strong>name:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The name of this Partner App.</td>
</tr>
<tr>
<td style="text-align: right"><strong>email:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The contact email for this Partner App.</td>
</tr>
<tr>
<td style="text-align: right"><strong>website:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s homepage.</td>
</tr>
<tr>
<td style="text-align: right"><strong>logo:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The Partner App&rsquo;s logo, used in the OAuth authorize page. Must be a data URI.</td>
</tr>
<tr>
<td style="text-align: right"><strong>redirectUri:</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td style="text-align: right"></td>
<td>The redirect URI used during OAuth. This value <strong>must match</strong> the argument received in the authorize call.</td>
</tr>
</tbody></table>

<p><aside class="success">
  Response 200 - Partner App Updated
</aside></p>

<p><aside class="warning">
  Response 400 - The Partner App data is invalid. Probably one of the fields is empty or null.
</aside></p>

          <h1 id='errors'>Errors</h1>
<p>The Conversio API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Something required is missing of the request is malformed</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The requested resource is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified endpoint, receipt or coupon could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a resource with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>413</td>
<td>Request Entity Too Large &ndash; You sent too much data to us</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re exceeding the API rate limit</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
